<script>
<!--
document.write(unescape("%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%2C%20maximum-scale%3D1.0%2C%20user-scalable%3Dno%22%3E%0A%20%20%20%20%3Ctitle%3ESyncSphere%20-%20Watch%20%26%20Listen%20Together%3C/title%3E%0A%20%20%20%20%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A//fonts.googleapis.com%22%3E%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A//fonts.gstatic.com%22%20crossorigin%3E%0A%20%20%20%20%3Clink%20href%3D%22https%3A//fonts.googleapis.com/css2%3Ffamily%3DPoppins%3Awght@400%3B500%3B600%3B700%26display%3Dswap%22%20rel%3D%22stylesheet%22%3E%0A%20%20%20%20%3Clink%20href%3D%22https%3A//fonts.googleapis.com/icon%3Ffamily%3DMaterial+Icons%22%20rel%3D%22stylesheet%22%3E%0A%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20%3Aroot%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20--primary-color%3A%20%230d6efd%3B%20--primary-dark%3A%20%230a58ca%3B%20--accent-color%3A%20%23fd7e14%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--background-color%3A%20%23f8f9fa%3B%20--surface-color%3A%20%23ffffff%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--text-primary%3A%20%23212529%3B%20--text-secondary%3A%20%236c757d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--border-color%3A%20%23dee2e6%3B%20--danger-color%3A%20%23dc3545%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.theme-colors-action%20%7B%20--primary-color%3A%20%23FF5722%3B%20%7D%20.theme-colors-comedy%20%7B%20--primary-color%3A%20%23FFC107%3B%20%7D%20.theme-colors-horror%20%7B%20--primary-color%3A%20%23b71c1c%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-colors-romantic%20%7B%20--primary-color%3A%20%23E91E63%3B%20%7D%20.theme-colors-party%20%7B%20--primary-color%3A%20%23FF5722%3B%20%7D%20.theme-colors-chill%20%7B%20--primary-color%3A%20%23009688%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20.theme-bg-romantic%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZHRoPSI1MCI+PHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSJ0cmFuc3BhcmVudCIvPjxwYXRoIGQ9Ik0gMjUgNDAgQyAyNSAzMCwgNDAgMjAsIDQwIDE1IEggMzcgQyAzNyAxNywgMjggMjUsIDI1IDMwIEMgMjIgMjUsIDEzIDE3LCAxMyAxNSBIIEExMCAxNSBDIDEwIDIwLCAyNSAzMCwgMjUgNDAgWiIgZmlsbD0iI0U5MUU2MyIgb3BhY2l0eT0iMC4xMiIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-bg-party%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIzIiBjeT0iMyIgcj0iMiIgZmlsbD0iI0ZGM0Q3RCIgb3BhY2l0eT0iMC41Ii8+PHJlY3QgeD0iMjUiIHk9IjUiIHdpZHRoPSIzIiBoZWlnaHQ9IjEwIiByeD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgMjUgNSkiIGZpbGw9IiM0Q0FCRTAiIG9wYWNpdHk9IjAuNSIvPjxwb2x5Z29uIHBvaW50cz0iNTAsMjAgNTUsMjUgNjAsMjAiIGZpbGw9IiNGRkVCMzIiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjQ1IiBjeT0iNTAiIHI9IjMiIGZpbGw9IiM4QkMyNTQiIG9wYWNpdHk9IjAuNSIvPjxwb2x5Z29uIHBvaW50cz0iNSw1MCAxMCw1NSA1LDU1IiBmaWxsPSIjRjQ0MzM2IiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-bg-chill%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZHRoPSI0MCI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDBCOEE0IiBzdHJva2Utd2lkdGg9IjIiIG9wYWNpdHk9IjAuMSIgZD0iTSAwIDIwIEMgMjAgMTAsIDQwIDEwLCA0MCAyMCBTIDYwIDMwLCA4MCAyMCIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-bg-horror%20%7B%20background-color%3A%20%23121212%20%21important%3B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzEyMTIxMiIvPjxwYXRoIGQ9Ik0tMTAgMzAgaDIwIHYyMCBoLTIwWiBNLTggMjIgaDE2IHYxNiBoLTE2WiIgZmlsbD0iIzMzMyIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-bg-action%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZHRoPSI0MCI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRkZFN0UyIi8+PHBhdGggZD0iTSAwIDAgTCAyMCAyMCBMIDAgNDBaIiBmaWxsPSIjRkY5ODAwIi8+PHBhdGggZD0iTSA0MCAwIEwgMjAgMjAgTCA0MCA0MFoiIGZpbGw9IiNGQjc4MTIiLz48L3N2Zz4%3D%27%29%3B%20background-size%3A%2020px%2020px%3B%7D%0A%0A%20%20%20%20%20%20%20%20*%20%7B%20box-sizing%3A%20border-box%3B%20margin%3A%200%3B%20padding%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20html%2C%20body%20%7B%20height%3A%20100%25%3B%20width%3A%20100%25%3B%20overflow%3A%20hidden%3B%20position%3A%20fixed%3B%20%7D%0A%20%20%20%20%20%20%20%20body%20%7B%20font-family%3A%20%27Poppins%27%2C%20sans-serif%3B%20background-color%3A%20%23f0f2f5%3B%20color%3A%20var%28--text-primary%29%3B%20-webkit-tap-highlight-color%3A%20transparent%3B%20%7D%0A%20%20%20%20%20%20%20%20.screen%20%7B%20display%3A%20none%3B%20flex-direction%3A%20column%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20opacity%3A%200%3B%20transition%3A%20opacity%200.4s%20ease-in-out%3B%20background-color%3A%20inherit%3B%20overflow%3A%20hidden%3B%20%7D%0A%20%20%20%20%20%20%20%20.screen.active%20%7B%20display%3A%20flex%3B%20opacity%3A%201%3B%20%7D%0A%20%20%20%20%20%20%20%20.hidden%20%7B%20display%3A%20none%20%21important%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%23home-screen%20%7B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20padding%3A%2020px%3B%20overflow-y%3A%20auto%3B%20-webkit-overflow-scrolling%3A%20touch%3B%20background-color%3A%20%23f0f2f5%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-container%20%7B%20width%3A%20100%25%3B%20max-width%3A%20380px%3B%20margin%3A%2020px%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-card%20%7B%20background%3A%20var%28--surface-color%29%3B%20padding%3A%2024px%3B%20border-radius%3A%2016px%3B%20border%3A%201px%20solid%20var%28--border-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.form-section%20%7B%20margin-bottom%3A%2024px%3B%20%7D%0A%20%20%20%20%20%20%20%20.form-label%20%7B%20font-weight%3A%20600%3B%20color%3A%20var%28--text-primary%29%3B%20font-size%3A%2016px%3B%20display%3A%20block%3B%20margin-bottom%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.mode-selection%20%7B%20display%3A%20flex%3B%20gap%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.mode-btn%20%7B%20flex%3A%201%3B%20padding%3A%2010px%3B%20border%3A%202px%20solid%20var%28--border-color%29%3B%20border-radius%3A%2010px%3B%20cursor%3A%20pointer%3B%20transition%3A%20all%200.3s%3B%20text-align%3A%20center%3B%20%7D%0A%20%20%20%20%20%20%20%20.mode-btn%20.icon%20%7B%20font-size%3A%2024px%3B%20color%3A%20var%28--primary-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-chip-container%20%7B%20display%3A%20flex%3B%20flex-wrap%3A%20wrap%3B%20gap%3A%208px%3B%20margin-top%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-chip%20%7B%20cursor%3A%20pointer%3B%20padding%3A%206px%2012px%3B%20border%3A%201px%20solid%20var%28--border-color%29%3B%20border-radius%3A%2020px%3B%20font-size%3A%2013px%3B%20font-weight%3A%20500%3B%20transition%3A%20all%200.2s%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-chip.selected%20%7B%20background%3A%20var%28--primary-color%29%3B%20color%3A%20white%3B%20border-color%3A%20var%28--primary-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.divider%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20text-align%3A%20center%3B%20margin%3A%2024px%200%3B%20color%3A%20%23aaa%3B%20font-weight%3A%20500%3B%20%7D%0A%20%20%20%20%20%20%20%20.divider%3A%3Abefore%2C%20.divider%3A%3Aafter%20%7B%20content%3A%20%27%27%3B%20flex%3A%201%3B%20border-bottom%3A%201px%20solid%20var%28--border-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.divider%3Anot%28%3Aempty%29%3A%3Abefore%20%7B%20margin-right%3A%20.25em%3B%20%7D%0A%20%20%20%20%20%20%20%20.divider%3Anot%28%3Aempty%29%3A%3Aafter%20%7B%20margin-left%3A%20.25em%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn%20%7B%20padding%3A%2012px%2020px%3B%20border-radius%3A%2010px%3B%20font-size%3A%2015px%3B%20font-weight%3A%20600%3B%20border%3A%20none%3B%20cursor%3A%20pointer%3B%20text-transform%3A%20uppercase%3B%20letter-spacing%3A%200.5px%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20.app-bar%20%7B%20background-color%3A%20var%28--surface-color%29%3B%20padding%3A%200%2012px%3B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20min-height%3A%2060px%3B%20box-shadow%3A%200%202px%204px%20rgba%280%2C0%2C0%2C0.08%29%3B%20flex-shrink%3A%200%3B%20z-index%3A%2010%3B%20gap%3A%208px%3B%20%7D%0A%20%20%20%20%20%20%20%20.room-meta%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.room-id-display%20%7B%20font-size%3A%2012px%3B%20font-weight%3A%20600%3B%20background%3A%20rgba%280%2C0%2C0%2C0.5%29%3B%20color%3A%20white%3B%20padding%3A%204px%2010px%3B%20border-radius%3A%2020px%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn-leave%20%7B%20background%3A%20transparent%3B%20border%3A%201px%20solid%20%23ffcdd2%3B%20color%3A%20var%28--danger-color%29%3B%20padding%3A%206px%2010px%3B%20font-size%3A%2014px%3B%20border-radius%3A%208px%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%204px%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn-leave%20.material-icons%20%7B%20font-size%3A%2018px%3B%20%7D%0A%20%20%20%20%20%20%20%20.main-content%20%7B%20display%3A%20flex%3B%20flex%3A%201%3B%20min-height%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.chat-section%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20background%3A%20inherit%3B%20%7D%0A%20%20%20%20%20%20%20%20.chat-messages%20%7B%20flex-grow%3A%201%3B%20overflow-y%3A%20auto%3B%20padding%3A%2016px%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20gap%3A%2012px%3B%20background%3A%20inherit%3B%20%7D%0A%20%20%20%20%20%20%20%20.chat-input-container%20%7B%20padding%3A%2012px%3B%20display%3A%20flex%3B%20gap%3A%208px%3B%20border-top%3A%201px%20solid%20var%28--border-color%29%3B%20background%3A%20var%28--surface-color%29%3B%20padding-bottom%3A%20calc%2812px%20+%20env%28safe-area-inset-bottom%29%29%3B%20flex-shrink%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.input-field%20%7B%20width%3A%20100%25%3B%20padding%3A%2012px%2016px%3B%20border%3A%201px%20solid%20var%28--border-color%29%3B%20border-radius%3A%2022px%3B%20font-size%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn-send%20%7B%20background%3A%20var%28--primary-color%29%3B%20color%3A%20white%3B%20border-radius%3A%2050%25%3B%20width%3A%2044px%3B%20height%3A%2044px%3B%20padding%3A%200%3B%20flex-shrink%3A%200%3B%20border%3A%20none%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%23movie-screen%20.main-content%20%7B%20flex-direction%3A%20column%3B%20%7D%0A%20%20%20%20%20%20%20%20%23movie-screen%20.video-section%20%7B%20flex%3A%201%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20padding%3A%2016px%3B%20min-height%3A%2050%25%3B%20background-color%3A%20var%28--background-color%29%3B%7D%0A%20%20%20%20%20%20%20%20%23movie-screen%20.chat-section%20%7B%20width%3A%20100%25%3B%20flex%3A%201%3B%20min-height%3A%2040%25%3B%20background-color%3A%20transparent%3B%20border-left%3A%20none%3B%20%7D%0A%20%20%20%20%20%20%20%20%23movie-screen%20.chat-messages%20%7B%20background%3A%20transparent%20%21important%3B%20%7D%0A%20%20%20%20%20%20%20%20%23movie-screen%20.app-bar%20%7B%20background-color%3A%20var%28--background-color%29%3B%20box-shadow%3A%20none%3B%20padding-bottom%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20%23movie-screen%20.room-id-display%2C%20%23movie-screen%20.user-count%20%7B%20color%3A%20var%28--text-secondary%29%3B%20background%3A%20%23e9ecef%3B%7D%0A%20%20%20%20%20%20%20%20.player-controls%20%7B%20position%3Aabsolute%3B%20bottom%3A15px%3B%20right%3A15px%3B%20display%3Aflex%3B%20align-items%3A%20center%3B%20gap%3A4px%3B%20background%3Argba%2833%2C33%2C33%2C.7%29%3B%20backdrop-filter%3Ablur%285px%29%3B%20padding%3A%206px%3B%20border-radius%3A50px%3B%20%7D%0A%20%20%20%20%20%20%20%20.emoji-bar%20%7B%20display%3A%20flex%3B%20gap%3A%204px%3B%20transition%3A%20max-width%200.4s%20ease%2C%20opacity%200.4s%20ease%3B%20max-width%3A%20500px%3B%20overflow%3A%20hidden%3B%20%7D%0A%20%20%20%20%20%20%20%20.emoji-bar.hidden%20%7B%20max-width%3A%200%3B%20opacity%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.player-controls%20.control-btn%20%7B%20background%3Atransparent%3B%20border%3Anone%3B%20color%3Awhite%3B%20cursor%3Apointer%3B%20width%3A38px%3B%20height%3A38px%3B%20font-size%3A22px%3B%20border-radius%3A50%25%3B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%20%7D%0A%20%20%20%20%20%20%20%20.player-controls%20.control-btn%3Ahover%20%7B%20background-color%3Argba%28255%2C255%2C255%2C.2%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.player-controls%20.divider%20%7B%20width%3A%201px%3B%20height%3A%2020px%3B%20background%3A%20rgba%28255%2C255%2C255%2C0.3%29%3B%20margin%3A%200%204px%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%23music-screen%20%7B%20max-width%3A%20420px%3B%20margin%3A%200%20auto%3B%20box-shadow%3A%200%205px%2025px%20rgba%280%2C0%2C0%2C0.1%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.music-header%20.room-id-display%20%7B%20color%3A%20white%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-chat-container%20%7B%20flex-grow%3A%201%3B%20overflow%3A%20hidden%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20background%3A%20inherit%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-chat-container%20.chat-messages%20%7B%20margin-top%3A%20auto%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-controls%20%7B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20gap%3A%2016px%3B%20padding%3A%208px%200%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-controls%20.control-btn%20%7B%20background%3A%20rgba%28255%2C255%2C255%2C0.15%29%3B%20border%3A%20none%3B%20color%3A%20white%3B%20cursor%3A%20pointer%3B%20width%3A%2048px%3B%20height%3A%2048px%3B%20border-radius%3A%2050%25%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20transition%3A%20all%200.2s%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-controls%20.play-pause-btn%20%7B%20width%3A%2060px%3B%20height%3A%2060px%3B%20background-color%3A%20var%28--accent-color%29%3B%20color%3A%20var%28--text-primary%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%23music-search-results%2C%20%23movie-search-results%20%7B%20position%3A%20absolute%3B%20top%3A%20100%25%3B%20left%3A%200%3B%20right%3A%200%3B%20background%3A%20white%3B%20border-radius%3A%2010px%3B%20max-height%3A%20250px%3B%20overflow-y%3A%20auto%3B%20z-index%3A%20100%3B%20box-shadow%3A%200%204px%2012px%20rgba%280%2C0%2C0%2C0.15%29%3B%20margin-top%3A%208px%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-item%20%7B%20display%3A%20flex%3B%20align-items%3A%20center%3B%20gap%3A%2012px%3B%20padding%3A%208px%3B%20cursor%3A%20pointer%3B%20border-bottom%3A%201px%20solid%20var%28--border-color%29%3B%20color%3A%20%23333%20%21important%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-item%3Alast-child%20%7B%20border-bottom%3A%20none%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-item%3Ahover%20%7B%20background%3A%20%23f0f2f5%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-thumbnail%20%7B%20width%3A%2080px%3B%20height%3A%2045px%3B%20object-fit%3A%20cover%3B%20border-radius%3A%204px%3B%20flex-shrink%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-title%20%7B%20font-size%3A%2014px%3B%20line-height%3A%201.3%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20/*%20Modal%20%26%20Condensed%20CSS%20*/%0A%20%20%20%20%20%20%20%20.modal%7Bposition%3Afixed%3Bz-index%3A1000%3Bleft%3A0%3Btop%3A0%3Bwidth%3A100%25%3Bheight%3A100%25%3Bbackground-color%3Argba%280%2C0%2C0%2C.5%29%3Bdisplay%3Anone%3Bjustify-content%3Acenter%3Balign-items%3Acenter%3Bopacity%3A0%3Btransition%3Aopacity%20.2s%20ease-in-out%7D.modal.visible%7Bdisplay%3Aflex%3Bopacity%3A1%7D.modal-content%7Bbackground-color%3Avar%28--surface-color%29%3Bpadding%3A24px%3Bborder-radius%3A16px%3Btext-align%3Acenter%3Bwidth%3A90%25%3Bmax-width%3A380px%3Bbox-shadow%3A0%205px%2015px%20rgba%280%2C0%2C0%2C.2%29%3Btransform%3Ascale%28.95%29%3Btransition%3Atransform%20.2s%20ease-in-out%7D.modal.visible%20.modal-content%7Btransform%3Ascale%281%29%7D%23emoji-customization-modal%20.modal-content%7Bmax-width%3A420px%7D.modal-title%7Bmargin-top%3A0%3Bmargin-bottom%3A8px%3Bfont-weight%3A600%3Bfont-size%3A20px%3Bline-height%3A1.3%7D.modal-message%7Bmargin-bottom%3A24px%3Bcolor%3Avar%28--text-secondary%29%3Bline-height%3A1.5%7D.modal-actions%7Bdisplay%3Aflex%3Bgap%3A12px%3Bjustify-content%3Acenter%7D%23all-emojis%7Bdisplay%3Agrid%3Bgrid-template-columns%3Arepeat%28auto-fill%2Cminmax%2840px%2C1fr%29%29%3Bgap%3A8px%3Bmax-height%3A200px%3Boverflow-y%3Aauto%3Bpadding%3A10px%3Bborder%3A1px%20solid%20var%28--border-color%29%3Bborder-radius%3A8px%7D%23all-emojis%20.emoji-btn%7Bfont-size%3A24px%3Bcursor%3Apointer%3Bbackground%3Atransparent%3Bborder%3Anone%3Bborder-radius%3A8px%3Bpadding%3A4px%7D.all-emojis-title%7Bfont-weight%3A600%3Bmargin-top%3A16px%3Bmargin-bottom%3A8px%3Btext-align%3Aleft%7D.current-emojis-container%7Bmin-height%3A50px%3Bborder%3A1px%20solid%20var%28--border-color%29%3Bborder-radius%3A8px%3Bpadding%3A8px%3Bdisplay%3Aflex%3Bgap%3A8px%3Balign-items%3Acenter%7D%0A%20%20%20%20%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20id%3D%22home-screen%22%20class%3D%22screen%20active%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-header%22%3E%3Ch1%20class%3D%22home-logo%22%3E%3Ci%20class%3D%22material-icons%20icon%22%3Ehub%3C/i%3E%20SyncSphere%3C/h1%3E%3Cp%20class%3D%22home-tagline%22%3EWatch%20%26%20Listen%20Together%3C/p%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-card%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22form-section%22%3E%3Clabel%20class%3D%22form-label%22%3EYour%20Name%3C/label%3E%3Cinput%20type%3D%22text%22%20id%3D%22name-input%22%20class%3D%22input-field%22%20placeholder%3D%22E.g.%2C%20Alex%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Chr%20class%3D%22subtle-divider%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22form-section%22%3E%3Clabel%20class%3D%22form-label%22%3EExperience%3C/label%3E%3Cdiv%20class%3D%22mode-selection%22%3E%3Cdiv%20class%3D%22mode-btn%22%20data-mode%3D%22movie%22%3E%3Ci%20class%3D%22icon%20material-icons%22%3Emovie%3C/i%3E%3Cspan%3EMovie%3C/span%3E%3C/div%3E%3Cdiv%20class%3D%22mode-btn%22%20data-mode%3D%22music%22%3E%3Ci%20class%3D%22icon%20material-icons%22%3Emusic_note%3C/i%3E%3Cspan%3EMusic%3C/span%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22form-section%22%3E%3Clabel%20class%3D%22form-label%22%3ETheme%3C/label%3E%3Cdiv%20id%3D%22theme-selector-chips%22%20class%3D%22theme-chip-container%22%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Chr%20class%3D%22subtle-divider%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22form-section%22%3E%3Cbutton%20id%3D%22create-room-btn%22%20class%3D%22btn%20btn-primary%22%3ECreate%20Room%3C/button%3E%3Cdiv%20class%3D%22divider%22%3EOR%3C/div%3E%3Cinput%20type%3D%22text%22%20id%3D%22room-id-input%22%20class%3D%22input-field%22%20placeholder%3D%22Enter%206-Digit%20Room%20ID%22%20maxlength%3D%226%22%20inputmode%3D%22numeric%22%3E%3Cbutton%20id%3D%22join-room-btn%22%20class%3D%22btn%20btn-secondary%22%20style%3D%22margin-top%3A%2012px%3B%22%3EJoin%20Room%3C/button%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20id%3D%22movie-screen%22%20class%3D%22screen%22%3E%0A%20%20%20%20%20%20%20%20%3Cmain%20class%3D%22main-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Csection%20class%3D%22video-section%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cheader%20class%3D%22app-bar%22%3E%3Cbutton%20class%3D%22btn%20btn-leave%22%3E%3Ci%20class%3D%22material-icons%22%3Elogout%3C/i%3E%3C/button%3E%3Cdiv%20class%3D%22room-id-display%22%3EID%3A%20%3Cspan%3E-%3C/span%3E%3C/div%3E%3Cdiv%20class%3D%22user-count%22%3E%3Ci%20class%3D%22material-icons%22%3Epeople%3C/i%3E%3Cspan%3E1%3C/span%3E%3C/div%3E%3C/header%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22search-container%22%20style%3D%22margin-top%3A%2016px%3B%22%3E%3Cinput%20type%3D%22text%22%20id%3D%22movie-search-input%22%20class%3D%22input-field%22%20placeholder%3D%22Search%20YouTube%20or%20paste%20direct%20link...%22%3E%3Cdiv%20id%3D%22movie-search-results%22%20class%3D%22hidden%22%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22player-container%22%3E%3Cdiv%20class%3D%22player-wrapper%22%3E%3Cdiv%20id%3D%22movie-player%22%3E%3C/div%3E%3Cvideo%20id%3D%22html5-player%22%20class%3D%22hidden%22%20controls%3E%3C/video%3E%3Cdiv%20class%3D%22player-controls%22%3E%3Cbutton%20class%3D%22control-btn%22%20id%3D%22add-emoji-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Eadd_reaction%3C/i%3E%3C/button%3E%3Cdiv%20class%3D%22divider%22%3E%3C/div%3E%3Cdiv%20id%3D%22emoji-bar%22%20class%3D%22emoji-bar%22%3E%3C/div%3E%3Cdiv%20class%3D%22divider%22%3E%3C/div%3E%3Cbutton%20class%3D%22control-btn%22%20id%3D%22toggle-emoji-bar-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Emore_horiz%3C/i%3E%3C/button%3E%3Cbutton%20class%3D%22control-btn%22%20id%3D%22fullscreen-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Efullscreen%3C/i%3E%3C/button%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/section%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Csection%20class%3D%22chat-section%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22chat-messages%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22chat-input-container%22%3E%3Cinput%20type%3D%22text%22%20class%3D%22input-field%20chat-input%22%20placeholder%3D%22Type%20a%20message...%22%3E%3Cbutton%20class%3D%22btn-send%22%3E%3Ci%20class%3D%22material-icons%22%3Esend%3C/i%3E%3C/button%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/section%3E%0A%20%20%20%20%20%20%20%20%3C/main%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id%3D%22music-screen%22%20class%3D%22screen%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22music-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22room-meta%22%3E%3Cbutton%20class%3D%22btn%20btn-leave%22%3E%3Ci%20class%3D%22material-icons%22%3Elogout%3C/i%3E%20Leave%3C/button%3E%3Cdiv%20class%3D%22room-id-display%22%3EID%3A%20%3Cspan%3E-%3C/span%3E%3C/div%3E%3Cdiv%20class%3D%22user-count%22%3E%uD83D%uDC64%3Cspan%3E1%3C/span%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22search-container%22%20style%3D%22margin%3A12px%200%3B%22%3E%3Cinput%20type%3D%22text%22%20id%3D%22music-search-input%22%20class%3D%22input-field%22%20placeholder%3D%22Search%20for%20music...%22%3E%3Cdiv%20id%3D%22music-search-results%22%20class%3D%22hidden%22%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22music-now-playing%22%20class%3D%22hidden%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22music-controls%22%20class%3D%22hidden%22%3E%3Cbutton%20class%3D%22control-btn%20backward-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Ereplay_10%3C/i%3E%3C/button%3E%3Cbutton%20class%3D%22control-btn%20play-pause-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Eplay_arrow%3C/i%3E%3C/button%3E%3Cbutton%20class%3D%22control-btn%20forward-btn%22%3E%3Ci%20class%3D%22material-icons%22%3Eforward_10%3C/i%3E%3C/button%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22music-chat-container%22%3E%3Cdiv%20class%3D%22chat-messages%22%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22chat-input-container%22%3E%3Cinput%20type%3D%22text%22%20class%3D%22input-field%20chat-input%22%20placeholder%3D%22Type%20a%20message...%22%3E%3Cbutton%20class%3D%22btn-send%22%3E%3Ci%20class%3D%22material-icons%22%3Esend%3C/i%3E%3C/button%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20id%3D%22music-player%22%20style%3D%22position%3A%20absolute%3B%20top%3A%20-9999px%3B%20left%3A%20-9999px%3B%22%3E%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22share-modal%22%20class%3D%22modal%22%3E%3Cdiv%20class%3D%22modal-content%22%3E%3Ch3%20class%3D%22modal-title%22%3EShare%20Room%3C/h3%3E%3Cp%20class%3D%22modal-message%22%3ESend%20this%20link%20or%20ID%20to%20friends%21%3C/p%3E%3Cinput%20type%3D%22text%22%20id%3D%22share-link-input%22%20readonly%3E%3Cdiv%20class%3D%22modal-actions%22%3E%3Cbutton%20id%3D%22copy-link-btn%22%20class%3D%22btn%20btn-primary%22%3ECopy%3C/button%3E%3Cbutton%20class%3D%22btn%20modal-close-btn%22%20style%3D%22background-color%3A%20var%28--text-secondary%29%3B%20color%3A%20white%3B%22%3EClose%3C/button%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22confirmation-modal%22%20class%3D%22modal%22%3E%3Cdiv%20class%3D%22modal-content%22%3E%3Ch3%20class%3D%22modal-title%22%20id%3D%22confirm-modal-title%22%3EConfirm%3C/h3%3E%3Cp%20class%3D%22modal-message%22%20id%3D%22confirm-modal-message%22%3EAre%20you%20sure%3F%3C/p%3E%3Cdiv%20class%3D%22modal-actions%22%3E%3Cbutton%20id%3D%22modal-cancel-btn%22%20class%3D%22btn%20modal-close-btn%22%20style%3D%22background-color%3A%20var%28--text-secondary%29%3B%20color%3A%20white%3B%22%3ECancel%3C/button%3E%3Cbutton%20id%3D%22modal-confirm-btn%22%20class%3D%22btn%20btn-primary%22%20style%3D%22background-color%3A%20var%28--danger-color%29%3B%22%3EConfirm%3C/button%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22info-modal%22%20class%3D%22modal%22%3E%3Cdiv%20class%3D%22modal-content%22%3E%3Ch3%20class%3D%22modal-title%22%20id%3D%22info-modal-title%22%3ENotice%3C/h3%3E%3Cp%20class%3D%22modal-message%22%20id%3D%22info-modal-message%22%3ESomething%20happened.%3C/p%3E%3Cdiv%20class%3D%22modal-actions%22%3E%3Cbutton%20id%3D%22info-modal-ok-btn%22%20class%3D%22btn%20btn-primary%20modal-close-btn%22%3EOK%3C/button%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22emoji-customization-modal%22%20class%3D%22modal%22%3E%3Cdiv%20class%3D%22modal-content%22%3E%3Ch3%20class%3D%22modal-title%22%3ECustomize%20Reactions%3C/h3%3E%3Cp%20class%3D%22modal-message%22%3EClick%20an%20emoji%20below%20to%20add%20it%20to%20your%20reaction%20bar.%3C/p%3E%3Cdiv%20id%3D%22all-emojis%22%3E%3C/div%3E%3Ch3%20class%3D%22all-emojis-title%22%3EYour%20Reactions%3C/h3%3E%3Cdiv%20class%3D%22current-emojis-container%22%3E%3C/div%3E%3Cdiv%20class%3D%22modal-actions%22%20style%3D%22margin-top%3A%2024px%3B%22%3E%3Cbutton%20class%3D%22btn%20btn-primary%20modal-close-btn%22%3EDone%3C/button%3E%3C/div%3E%3C/div%3E%3C/div%3E%0A%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//www.youtube.com/iframe_api%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20type%3D%22module%22%3E%0A%20%20%20%20%20%20%20%20import%20%7B%20initializeApp%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/9.15.0/firebase-app.js%22%3B%0A%20%20%20%20%20%20%20%20import%20%7B%20getDatabase%2C%20ref%2C%20set%2C%20onValue%2C%20push%2C%20remove%2C%20onDisconnect%2C%20update%2C%20serverTimestamp%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/9.15.0/firebase-database.js%22%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20firebaseConfig%20%3D%20%7B%20apiKey%3A%20%22AIzaSyDpjMkde_2E6jmuPzxpdWO0z2QJk0zyaG8%22%2C%20authDomain%3A%20%22movie-bdf60.firebaseapp.com%22%2C%20databaseURL%3A%20%22https%3A//movie-bdf60-default-rtdb.asia-southeast1.firebasedatabase.app%22%2C%20projectId%3A%20%22movie-bdf60%22%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20YOUTUBE_API_KEY%20%3D%20%27AIzaSyBfXvqgbFoh0GgYTm9YiTBQaAImCc2J2yc%27%3B%0A%20%20%20%20%20%20%20%20const%20app%20%3D%20initializeApp%28firebaseConfig%29%3B%0A%20%20%20%20%20%20%20%20const%20db%20%3D%20getDatabase%28app%29%3B%0A%0A%20%20%20%20%20%20%20%20const%20screens%20%3D%20%7B%20home%3A%20document.getElementById%28%27home-screen%27%29%2C%20movie%3A%20document.getElementById%28%27movie-screen%27%29%2C%20music%3A%20document.getElementById%28%27music-screen%27%29%2C%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20homeUI%20%3D%20%7B%20nameInput%3A%20document.getElementById%28%27name-input%27%29%2C%20modeBtns%3A%20document.querySelectorAll%28%27.mode-btn%27%29%2C%20themeChipsContainer%3A%20document.getElementById%28%27theme-selector-chips%27%29%2C%20createBtn%3A%20document.getElementById%28%27create-room-btn%27%29%2C%20joinInput%3A%20document.getElementById%28%27room-id-input%27%29%2C%20joinBtn%3A%20document.getElementById%28%27join-room-btn%27%29%2C%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20modals%20%3D%20%7B%20share%3A%20document.getElementById%28%27share-modal%27%29%2C%20shareLinkInput%3A%20document.getElementById%28%27share-link-input%27%29%2C%20copyLinkBtn%3A%20document.getElementById%28%27copy-link-btn%27%29%2C%20confirm%3A%20document.getElementById%28%27confirmation-modal%27%29%2C%20confirmBtn%3A%20document.getElementById%28%27modal-confirm-btn%27%29%2C%20info%3A%20document.getElementById%28%27info-modal%27%29%2C%20infoTitle%3A%20document.getElementById%28%27info-modal-title%27%29%2C%20infoMessage%3A%20document.getElementById%28%27info-modal-message%27%29%2C%20emoji%3A%20document.getElementById%28%27emoji-customization-modal%27%29%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20currentMode%20%3D%20%27movie%27%2C%20currentRoomId%20%3D%20null%2C%20userName%20%3D%20%27%27%2C%20localUserRef%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ytPlayer%20%3D%20null%2C%20html5Player%20%3D%20document.getElementById%28%27html5-player%27%29%2C%20lastPlayerState%20%3D%20-1%2C%20playerStateTimeout%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20_modalConfirmCallback%20%3D%20null%2C%20_infoModalCallback%20%3D%20null%2C%20selectedThemeKey%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20themes%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20movie%3A%20%7B%20%27action%27%3A%20%7B%20name%3A%20%27Action%27%2C%20background%3A%20%27theme-bg-action%27%2C%20colors%3A%20%27theme-colors-action%27%20%7D%2C%20%27comedy%27%3A%20%7B%20name%3A%20%27Comedy%27%2C%20background%3A%20%27default%27%2C%20colors%3A%20%27theme-colors-comedy%27%20%7D%2C%20%27horror%27%3A%20%7B%20name%3A%20%27Horror%27%2C%20background%3A%20%27theme-bg-horror%27%2C%20colors%3A%20%27theme-colors-horror%27%20%7D%2C%20%27romantic%27%3A%20%7B%20name%3A%20%27Romantic%27%2C%20background%3A%20%27theme-bg-romantic%27%2C%20colors%3A%20%27theme-colors-romantic%27%20%7D%2C%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20music%3A%20%7B%20%27romantic%27%3A%20%7B%20name%3A%20%27Romantic%27%2C%20background%3A%20%27theme-bg-romantic%27%2C%20colors%3A%20%27theme-colors-romantic%27%2C%20queries%3A%20%5B%22latest%20bollywood%20romantic%20songs%22%2C%20%2290s%20hindi%20romantic%20hits%22%5D%20%7D%2C%20%27party%27%3A%20%7B%20name%3A%20%27Party%27%2C%20background%3A%20%27theme-bg-party%27%2C%20colors%3A%20%27theme-colors-party%27%2C%20queries%3A%20%5B%22bollywood%20party%20hits%202024%22%2C%20%22punjabi%20party%20songs%22%5D%20%7D%2C%20%27chill%27%3A%20%7B%20name%3A%20%27Chill%27%2C%20background%3A%20%27theme-bg-chill%27%2C%20colors%3A%20%27theme-colors-chill%27%2C%20queries%3A%20%5B%22coke%20studio%20hits%22%2C%20%22indian%20indie%20chill%22%5D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20allAvailableEmojis%20%3D%20%5B%27%u2764%uFE0F%27%2C%27%uD83D%uDE02%27%2C%27%uD83D%uDE2E%27%2C%27%uD83D%uDE2D%27%2C%27%uD83D%uDD25%27%2C%27%uD83D%uDC4F%27%2C%27%uD83D%uDC4D%27%2C%27%uD83D%uDC4E%27%2C%27%uD83D%uDE18%27%2C%27%uD83D%uDE0D%27%2C%27%uD83E%uDD14%27%2C%27%uD83E%uDD2F%27%2C%27%uD83C%uDF7F%27%2C%27%uD83C%uDF89%27%2C%27%uD83D%uDCAF%27%5D%3B%0A%20%20%20%20%20%20%20%20let%20userReactions%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20function%20showInfoModal%28title%2C%20message%2C%20onOk%29%20%7B%20modals.infoTitle.textContent%20%3D%20title%3B%20modals.infoMessage.textContent%20%3D%20message%3B%20_infoModalCallback%20%3D%20onOk%3B%20modals.info.classList.add%28%27visible%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20function%20showConfirmationModal%28title%2C%20message%2C%20onConfirm%29%20%7B%20document.getElementById%28%27confirm-modal-title%27%29.textContent%20%3D%20title%3B%20document.getElementById%28%27confirm-modal-message%27%29.textContent%20%3D%20message%3B%20_modalConfirmCallback%20%3D%20onConfirm%3B%20modals.confirm.classList.add%28%27visible%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20function%20hideAllModals%28%29%20%7B%20document.querySelectorAll%28%27.modal%27%29.forEach%28m%20%3D%3E%20m.classList.remove%28%27visible%27%29%29%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20let%20playerReady%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20window.onYouTubeIframeAPIReady%20%3D%20%28%29%20%3D%3E%20playerReady%20%3D%20true%3B%0A%0A%20%20%20%20%20%20%20%20function%20initPlayer%28videoId%2C%20mode%29%20%7B%20/*%20...%20same%20...%20*/%20%7D%0A%20%20%20%20%20%20%20%20function%20onPlayerStateChange%28event%29%20%7B%20/*%20...%20same%20...%20*/%20%7D%0A%20%20%20%20%20%20%20%20function%20syncPlayerState%28%29%20%7B%20/*%20...%20same%20...%20*/%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20validateInputs%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userName%20%3D%20homeUI.nameInput.value.trim%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21userName%29%20%7B%20showInfoModal%28%22Input%20Required%22%2C%20%22Please%20enter%20your%20name%20to%20continue.%22%29%3B%20return%20false%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21selectedThemeKey%29%20%7B%20showInfoModal%28%22Input%20Required%22%2C%20%22Please%20select%20a%20theme%20for%20your%20room.%22%29%3B%20return%20false%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20joinRoom%28roomId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20currentRoomId%20%3D%20roomId%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Use%20specific%20listeners%20to%20prevent%20unintended%20re-renders%0A%20%20%20%20%20%20%20%20%20%20%20%20onValue%28ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BcurrentRoomId%7D%60%29%2C%20%28snapshot%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21snapshot.exists%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28screens%5BcurrentMode%5D.classList.contains%28%27active%27%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showInfoModal%28%22Room%20Closed%22%2C%20%22This%20room%20no%20longer%20exists.%22%2C%20%28%29%20%3D%3E%20leaveRoom%28true%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20roomData%20%3D%20snapshot.val%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20//%20Split%20updates%20to%20avoid%20conflicts%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updateMemberUI%28roomData.members%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updateMessageUI%28roomData.messages%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updateThemeUI%28roomData.theme%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updateVideoUI%28roomData.currentVideo%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20updatePlayerUI%28roomData.playerState%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentMode%20%3D%3D%3D%20%27movie%27%29%20updateReactionUI%28roomData.reactions%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20%7B%20onlyOnce%3A%20false%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20screens.home.classList.remove%28%27active%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20screens%5BcurrentMode%5D.classList.add%28%27active%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20localUserRef%20%3D%20ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BcurrentRoomId%7D/members/%24%7BuserName.replace%28/%5B.%23%24%5B%5C%5D%5D/g%2C%20%27_%27%29%7D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20set%28localUserRef%2C%20%7Bname%3A%20userName%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20onDisconnect%28localUserRef%29.remove%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20---%20Modular%20UI%20Update%20Functions%20---%0A%20%20%20%20%20%20%20%20const%20updateMemberUI%20%3D%20%28members%29%20%3D%3E%20%7B%20screens%5BcurrentMode%5D.querySelectorAll%28%27.user-count%20span%27%29.forEach%28s%20%3D%3E%20s.textContent%20%3D%20members%20%3F%20Object.keys%28members%29.length%20%3A%200%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20updateMessageUI%20%3D%20%28messages%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20screens%5BcurrentMode%5D.querySelectorAll%28%27.chat-messages%27%29.forEach%28chatMessagesDiv%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20shouldScroll%20%3D%20chatMessagesDiv.scrollTop%20+%20chatMessagesDiv.clientHeight%20%3E%3D%20chatMessagesDiv.scrollHeight%20-%2050%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chatMessagesDiv.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28messages%29%20%7B%20Object.values%28messages%29.sort%28%28a%2C%20b%29%20%3D%3E%20a.timestamp%20-%20b.timestamp%29.forEach%28msg%20%3D%3E%20appendMessage%28msg.name%2C%20msg.text%2C%20msg.name%20%3D%3D%3D%20userName%2C%20chatMessagesDiv%29%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28shouldScroll%29%20chatMessagesDiv.scrollTop%20%3D%20chatMessagesDiv.scrollHeight%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20updateThemeUI%20%3D%20%28themeKey%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20activeScreen%20%3D%20screens%5BcurrentMode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20themeConfig%20%3D%20themes%5BcurrentMode%5D%5BthemeKey%20%7C%7C%20Object.keys%28themes%5BcurrentMode%5D%29%5B0%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeScreen.className%20%3D%20%60screen%20active%20%24%7BthemeConfig.colors%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20activeScreen.dataset.theme%20%3D%20themeKey%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28currentMode%20%3D%3D%3D%20%27music%27%29%20%7B%20activeScreen.classList.add%28themeConfig.background%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28currentMode%20%3D%3D%3D%20%27movie%27%29%20%7B%20activeScreen.querySelector%28%27.chat-section%27%29.className%20%3D%20%60chat-section%20%24%7BthemeConfig.background%7D%60%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20updateVideoUI%20%3D%20%28currentVideo%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21currentVideo%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20isYT%20%3D%20currentVideo.type%20%3D%3D%3D%20%27youtube%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27movie-player%27%29.classList.toggle%28%27hidden%27%2C%20%21isYT%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20html5Player.classList.toggle%28%27hidden%27%2C%20isYT%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isYT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20currentYTId%20%3D%20ytPlayer%3F.getVideoData%28%29%3F.video_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28currentVideo.id%20%21%3D%3D%20currentYTId%29%20initPlayer%28currentVideo.id%2C%20currentMode%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28html5Player.src%20%21%3D%3D%20currentVideo.id%29%20html5Player.src%20%3D%20currentVideo.id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28currentMode%20%3D%3D%3D%20%27music%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27%23music-now-playing%27%29.textContent%20%3D%20currentVideo.title%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27%23music-now-playing%27%29.classList.remove%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27%23music-controls%27%29.classList.remove%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20updatePlayerUI%20%3D%20%28playerState%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20if%28playerState%20%26%26%20ytPlayer%3F.getPlayerState%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20state%20%3D%20playerState%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28Math.abs%28ytPlayer.getCurrentTime%28%29%20-%20state.time%29%20%3E%202.5%29%20ytPlayer.seekTo%28state.time%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28state.status%20%3D%3D%3D%201%20%26%26%20ytPlayer.getPlayerState%28%29%20%21%3D%3D%201%29%20ytPlayer.playVideo%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28state.status%20%3D%3D%3D%202%20%26%26%20ytPlayer.getPlayerState%28%29%20%21%3D%3D%202%29%20ytPlayer.pauseVideo%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20updateReactionUI%20%3D%20%28reactions%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%28reactions%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20latestReaction%20%3D%20Object.values%28reactions%29.sort%28%28a%2Cb%29%20%3D%3E%20b.timestamp%20-%20a.timestamp%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28latestReaction%20%26%26%20latestReaction.timestamp%20%3E%20Date.now%28%29%20-%203000%29%20showFloatingEmoji%28latestReaction.emoji%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20function%20leaveRoom%28silent%20%3D%20false%29%20%7B%20/*%20...%20same%20...%20*/%20%7D%0A%20%20%20%20%20%20%20%20function%20resetUI%28%29%20%7B%20/*%20...%20same%20...%20*/%20%7D%0A%0A%20%20%20%20%20%20%20%20//%20---%20Emoji%20Customization%20---%0A%20%20%20%20%20%20%20%20function%20renderEmojiBar%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20bar%20%3D%20document.getElementById%28%27emoji-bar%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bar.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20userReactions.forEach%28emoji%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20btn%20%3D%20document.createElement%28%27button%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.className%20%3D%20%27control-btn%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.textContent%20%3D%20emoji%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%20push%28ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BcurrentRoomId%7D/reactions%60%29%2C%20%7B%20emoji%3A%20emoji%2C%20timestamp%3A%20serverTimestamp%28%29%20%7D%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bar.appendChild%28btn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20function%20renderEmojiModal%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20allEmojisContainer%20%3D%20document.getElementById%28%27all-emojis%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20currentEmojisContainer%20%3D%20document.querySelector%28%27.current-emojis-container%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20allEmojisContainer.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20currentEmojisContainer.innerHTML%20%3D%20%27%27%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20allAvailableEmojis.forEach%28emoji%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20btn%20%3D%20document.createElement%28%27button%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.className%20%3D%20%27emoji-btn%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.textContent%20%3D%20emoji%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21userReactions.includes%28emoji%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20userReactions.push%28emoji%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.setItem%28%27userReactions%27%2C%20JSON.stringify%28userReactions%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20renderEmojiModal%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20renderEmojiBar%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20allEmojisContainer.appendChild%28btn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20userReactions.forEach%28emoji%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20btn%20%3D%20document.createElement%28%27button%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.className%20%3D%20%27emoji-btn%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.textContent%20%3D%20emoji%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.style.border%20%3D%20%272px%20solid%20var%28--primary-color%29%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20btn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20userReactions%20%3D%20userReactions.filter%28e%20%3D%3E%20e%20%21%3D%3D%20emoji%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.setItem%28%27userReactions%27%2C%20JSON.stringify%28userReactions%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20renderEmojiModal%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20renderEmojiBar%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20currentEmojisContainer.appendChild%28btn%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20updateThemeSelector%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20homeUI.themeChipsContainer.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20Object.entries%28themes%5BcurrentMode%5D%29.forEach%28%28%5Bkey%2C%20config%5D%2C%20index%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20chip%20%3D%20document.createElement%28%27button%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chip.className%20%3D%20%27theme-chip%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chip.textContent%20%3D%20config.name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chip.onclick%20%3D%20%28%29%20%3D%3E%20%7B%20document.querySelectorAll%28%27.theme-chip%27%29.forEach%28c%20%3D%3E%20c.classList.remove%28%27selected%27%29%29%3B%20chip.classList.add%28%27selected%27%29%3B%20selectedThemeKey%20%3D%20key%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20homeUI.themeChipsContainer.appendChild%28chip%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28index%20%3D%3D%3D%200%29%20chip.click%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20function%20setupEventListeners%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20homeUI.createBtn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21validateInputs%28%29%29%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20newRoomId%20%3D%20generateRoomId%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20set%28ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BnewRoomId%7D%60%29%2C%20%7B%20theme%3A%20selectedThemeKey%2C%20createdAt%3A%20serverTimestamp%28%29%20%7D%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.then%28%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20joinRoom%28newRoomId%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20modals.shareLinkInput.value%20%3D%20%60%24%7Bwindow.location.origin%7D%24%7Bwindow.location.pathname%7D%3Fmode%3D%24%7BcurrentMode%7D%26room%3D%24%7BnewRoomId%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20modals.share.classList.add%28%27visible%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20homeUI.joinBtn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20/*%20...%20same%20...%20*/%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20homeUI.modeBtns.forEach%28btn%20%3D%3E%20btn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20homeUI.modeBtns.forEach%28b%20%3D%3E%20b.classList.remove%28%27selected%27%29%29%3B%20btn.classList.add%28%27selected%27%29%3B%20currentMode%20%3D%20btn.dataset.mode%3B%20updateThemeSelector%28%29%3B%20%7D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.querySelectorAll%28%27.modal-close-btn%27%29.forEach%28btn%20%3D%3E%20btn.addEventListener%28%27click%27%2C%20hideAllModals%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27info-modal-ok-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20if%28typeof%20_infoModalCallback%20%3D%3D%3D%20%27function%27%29%20_infoModalCallback%28%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20modals.confirmBtn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20if%28typeof%20_modalConfirmCallback%20%3D%3D%3D%20%27function%27%29%20_modalConfirmCallback%28%29%3B%20hideAllModals%28%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20modals.copyLinkBtn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20navigator.clipboard.writeText%28modals.shareLinkInput.value%29.then%28%28%29%20%3D%3E%20%7B%20modals.copyLinkBtn.textContent%20%3D%20%27Copied%21%27%3B%20setTimeout%28%28%29%20%3D%3E%20%7B%20modals.copyLinkBtn.textContent%20%3D%20%27Copy%27%3B%20%7D%2C%202000%29%3B%20%7D%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.querySelectorAll%28%27.btn-leave%27%29.forEach%28btn%20%3D%3E%20btn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20leaveRoom%28false%29%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.querySelectorAll%28%27.chat-input%27%29.forEach%28input%20%3D%3E%20%7B%20const%20sendBtn%20%3D%20input.nextElementSibling%3B%20input.addEventListener%28%27keypress%27%2C%20%28e%29%20%3D%3E%20e.key%20%3D%3D%3D%20%27Enter%27%20%26%26%20sendMessage%28input%29%29%3B%20sendBtn.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20sendMessage%28input%29%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%27movie%27%2C%20%27music%27%5D.forEach%28mode%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20debounceTimeout%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20searchInput%20%3D%20document.getElementById%28%60%24%7Bmode%7D-search-input%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchInput.addEventListener%28%27input%27%2C%20%28e%29%20%3D%3E%20%7B%20clearTimeout%28debounceTimeout%29%3B%20debounceTimeout%20%3D%20setTimeout%28%28%29%20%3D%3E%20performSearch%28e.target.value%2C%20mode%29%2C%20400%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchInput.addEventListener%28%27focus%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21searchInput.value%20%26%26%20mode%20%3D%3D%3D%20%27music%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20themeKey%20%3D%20document.querySelector%28%60%23%24%7Bmode%7D-screen%60%29.dataset.theme%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20queries%20%3D%20themes.music%5BthemeKey%5D%3F.queries%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28queries%29%20performSearch%28queries%5BMath.floor%28Math.random%28%29%20*%20queries.length%29%5D%2C%20%27music%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27add-emoji-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20renderEmojiModal%28%29%3B%20modals.emoji.classList.add%28%27visible%27%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27toggle-emoji-bar-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20document.getElementById%28%27emoji-bar%27%29.classList.toggle%28%27hidden%27%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20document.getElementById%28%27fullscreen-btn%27%29.addEventListener%28%27click%27%2C%20toggleFullscreen%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27.play-pause-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20%7B%20if%28ytPlayer%3F.getPlayerState%29%20update%28ref%28db%2C%20%60musicRooms/%24%7BcurrentRoomId%7D/playerState%60%29%2C%20%7B%20status%3A%20ytPlayer.getPlayerState%28%29%20%3D%3D%3D%201%20%3F%202%20%3A%201%20%7D%29%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27.forward-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20seekPlayer%2810%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20screens.music.querySelector%28%27.backward-btn%27%29.addEventListener%28%27click%27%2C%20%28%29%20%3D%3E%20seekPlayer%28-10%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20appendMessage%20%3D%20%28name%2C%20text%2C%20isMine%2C%20container%29%20%3D%3E%20%7B%20const%20msgItem%20%3D%20document.createElement%28%27div%27%29%3B%20msgItem.className%20%3D%20isMine%20%3F%20%27message-item%20mine%27%20%3A%20%27message-item%20other%27%3B%20const%20nameEl%20%3D%20document.createElement%28%27div%27%29%3B%20nameEl.className%20%3D%20%27message-name%27%3B%20nameEl.textContent%20%3D%20isMine%20%3F%20%27You%27%20%3A%20name%3B%20const%20bubbleEl%20%3D%20document.createElement%28%27div%27%29%3B%20bubbleEl.className%20%3D%20%27message-bubble%27%3B%20bubbleEl.textContent%20%3D%20text%3B%20msgItem.appendChild%28nameEl%29%3B%20msgItem.appendChild%28bubbleEl%29%3B%20container.appendChild%28msgItem%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20const%20sendMessage%20%3D%20%28input%29%20%3D%3E%20%7B%20const%20text%20%3D%20input.value.trim%28%29%3B%20if%28text%29%20%7B%20push%28ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BcurrentRoomId%7D/messages%60%29%2C%20%7Bname%3A%20userName%2C%20text%2C%20timestamp%3A%20serverTimestamp%28%29%7D%29%3B%20input.value%20%3D%20%27%27%3B%20%7D%20%7D%3B%0A%20%20%20%20%20%20%20%20async%20function%20performSearch%28query%2C%20mode%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20searchResultsDiv%20%3D%20document.getElementById%28%60%24%7Bmode%7D-search-results%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20inputField%20%3D%20document.getElementById%28%60%24%7Bmode%7D-search-input%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20youtubeRegex%20%3D%20/%28%3F%3Ahttps%3F%3A%5C/%5C/%29%3F%28%3F%3Awww%5C.%29%3F%28%3F%3Ayoutube%5C.com%5C/%28%3F%3Awatch%5C%3Fv%3D%7Cembed%5C/%7Cv%5C/%7Cshorts%5C/%29%7Cyoutu%5C.be%5C/%29%28%5Ba-zA-Z0-9_-%5D%7B11%7D%29/%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20directLinkRegex%20%3D%20/%5C.%28mp4%7Cwebm%29%24/i%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28youtubeRegex.test%28query%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20videoId%20%3D%20query.match%28youtubeRegex%29%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update%28ref%28db%2C%20%60movieRooms/%24%7BcurrentRoomId%7D%60%29%2C%20%7B%20currentVideo%3A%20%7B%20type%3A%20%27youtube%27%2C%20id%3A%20videoId%2C%20title%3A%20%27YouTube%20Video%27%20%7D%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputField.value%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28directLinkRegex.test%28query%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update%28ref%28db%2C%20%60movieRooms/%24%7BcurrentRoomId%7D%60%29%2C%20%7B%20currentVideo%3A%20%7B%20type%3A%20%27direct%27%2C%20id%3A%20query%2C%20title%3A%20%27Direct%20Link%27%20%7D%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputField.value%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21query%29%20%7B%20searchResultsDiv.classList.add%28%27hidden%27%29%3B%20return%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20url%20%3D%20%60https%3A//www.googleapis.com/youtube/v3/search%3Fpart%3Dsnippet%26q%3D%24%7BencodeURIComponent%28query%29%7D%26type%3Dvideo%26key%3D%24%7BYOUTUBE_API_KEY%7D%26maxResults%3D5%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20res%20%3D%20await%20fetch%28url%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20data%20%3D%20await%20res.json%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchResultsDiv.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28data.items%3F.length%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data.items.forEach%28item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20div%20%3D%20document.createElement%28%27div%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div.className%20%3D%20%27result-item%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div.innerHTML%20%3D%20%60%3Cimg%20src%3D%22%24%7Bitem.snippet.thumbnails.default.url%7D%22%20class%3D%22result-thumbnail%22%3E%3Cdiv%20class%3D%22result-title%22%3E%24%7Bitem.snippet.title%7D%3C/div%3E%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20div.onclick%20%3D%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20videoData%20%3D%20%7B%20id%3A%20item.id.videoId%2C%20title%3A%20item.snippet.title%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%28mode%20%3D%3D%3D%20%27movie%27%29%20videoData.type%20%3D%20%27youtube%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20update%28ref%28db%2C%20%60%24%7Bmode%7DRooms/%24%7BcurrentRoomId%7D%60%29%2C%20%7B%20currentVideo%3A%20videoData%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchResultsDiv.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20inputField.value%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchResultsDiv.appendChild%28div%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20searchResultsDiv.classList.remove%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28e%29%20%7B%20console.error%28%22YouTube%20Search%20Failed%3A%22%2C%20e%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20function%20showFloatingEmoji%28emoji%29%20%7B%20const%20el%20%3D%20document.createElement%28%27div%27%29%3B%20el.className%20%3D%20%27floating-emoji%27%3B%20el.textContent%20%3D%20emoji%3B%20el.style.left%20%3D%20%60%24%7B40%20+%20Math.random%28%29%20*%2020%7D%25%60%3B%20screens.movie.querySelector%28%27.player-wrapper%27%29.appendChild%28el%29%3B%20setTimeout%28%28%29%20%3D%3E%20el.remove%28%29%2C%202900%29%3B%20%7D%0A%20%20%20%20%20%20%20%20async%20function%20toggleFullscreen%28%29%20%7B%20const%20el%20%3D%20screens.movie.querySelector%28%27.player-wrapper%27%29%3B%20if%20%28%21document.fullscreenElement%29%20%7B%20await%20el.requestFullscreen%28%29%3B%20try%20%7B%20await%20screen.orientation.lock%28%27landscape%27%29%3B%20%7D%20catch%28e%29%7B%7D%20%7D%20else%20%7B%20await%20document.exitFullscreen%28%29%3B%20try%20%7B%20screen.orientation.unlock%28%29%3B%20%7D%20catch%28e%29%7B%7D%20%7D%20%7D%0A%20%20%20%20%20%20%20%20function%20seekPlayer%28seconds%29%20%7B%20if%28ytPlayer%3F.getCurrentTime%29%20%7B%20const%20newTime%20%3D%20Math.max%280%2C%20ytPlayer.getCurrentTime%28%29%20+%20seconds%29%3B%20update%28ref%28db%2C%20%60%24%7BcurrentMode%7DRooms/%24%7BcurrentRoomId%7D/playerState%60%29%2C%20%7B%20time%3A%20newTime%2C%20status%3A%20ytPlayer.getPlayerState%28%29%20%7D%29%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20const%20generateRoomId%20%3D%20%28%29%20%3D%3E%20Math.floor%28100000%20+%20Math.random%28%29%20*%20900000%29.toString%28%29%3B%0A%0A%20%20%20%20%20%20%20%20window.addEventListener%28%27load%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20savedReactions%20%3D%20localStorage.getItem%28%27userReactions%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20userReactions%20%3D%20savedReactions%20%3F%20JSON.parse%28savedReactions%29%20%3A%20%5B%27%u2764%uFE0F%27%2C%27%uD83D%uDE02%27%2C%27%uD83D%uDE2E%27%2C%27%uD83D%uDE18%27%2C%27%uD83D%uDC4D%27%2C%27%uD83D%uDC4E%27%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderEmojiBar%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20homeUI.modeBtns%5B0%5D.click%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setupEventListeners%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20urlParams%20%3D%20new%20URLSearchParams%28window.location.search%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mode%20%3D%20urlParams.get%28%27mode%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20roomId%20%3D%20urlParams.get%28%27room%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mode%20%26%26%20roomId%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20modeBtn%20%3D%20document.querySelector%28%60.mode-btn%5Bdata-mode%3D%22%24%7Bmode%7D%22%5D%60%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28modeBtn%29%20modeBtn.click%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20homeUI.joinInput.value%20%3D%20roomId%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20homeUI.nameInput.focus%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%29%3B%0A%20%20%20%20%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E"));
//-->
</script>
