<script>
<!--
document.write(unescape("%3C%21DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22en%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%2C%20maximum-scale%3D1.0%2C%20user-scalable%3Dno%22%3E%0A%20%20%20%20%3Ctitle%3ESyncTune%3C/title%3E%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A//fonts.googleapis.com%22%3E%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A//fonts.gstatic.com%22%20crossorigin%3E%0A%20%20%20%20%3Clink%20href%3D%22https%3A//fonts.googleapis.com/css2%3Ffamily%3DRoboto%3Awght@400%3B500%3B700%26display%3Dswap%22%20rel%3D%22stylesheet%22%3E%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20%3Aroot%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20--primary-color%3A%20%232196F3%3B%20--primary-dark-color%3A%20%231976D2%3B%20--accent-color%3A%20%23FFC107%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--background-color%3A%20%23f0f2f5%3B%20--card-color%3A%20%23ffffff%3B%20--text-color%3A%20%23333333%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20--light-text-color%3A%20%23757575%3B%20--divider-color%3A%20%23e0e0e0%3B%20--danger-color%3A%20%23F44336%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.theme-romantic%20%7B%20--primary-color%3A%20%23E91E63%3B%20--primary-dark-color%3A%20%23C2185B%3B%20--accent-color%3A%20%23FF80AB%3B%20--background-color%3A%20%23fce4ec%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-flirt%20%7B%20--primary-color%3A%20%239C27B0%3B%20--primary-dark-color%3A%20%237B1FA2%3B%20--accent-color%3A%20%23E040FB%3B%20--background-color%3A%20%23f3e5f5%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-party%20%7B%20--primary-color%3A%20%23FF5722%3B%20--primary-dark-color%3A%20%23E64A19%3B%20--accent-color%3A%20%23FFC107%3B%20--background-color%3A%20%23fff3e0%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-chill%20%7B%20--primary-color%3A%20%23009688%3B%20--primary-dark-color%3A%20%2300796B%3B%20--accent-color%3A%20%2380CBC4%3B%20--background-color%3A%20%23e0f2f1%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20*%20%7B%20box-sizing%3A%20border-box%3B%20margin%3A%200%3B%20padding%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20html%2C%20body%20%7B%20height%3A%20100%25%3B%20overflow%3A%20hidden%3B%20%7D%0A%20%20%20%20%20%20%20%20body%20%7B%20font-family%3A%20%27Roboto%27%2C%20sans-serif%3B%20background%3A%20%23eef2f7%3B%20color%3A%20var%28--text-color%29%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20-webkit-tap-highlight-color%3A%20transparent%3B%20touch-action%3A%20manipulation%3B%20%7D%0A%20%20%20%20%20%20%20%20.app-container%20%7B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20max-width%3A%20420px%3B%20max-height%3A%20850px%3B%20background-color%3A%20var%28--card-color%29%3B%20box-shadow%3A%200%2010px%2035px%20rgba%280%2C%200%2C%200%2C%200.1%29%2C%200%203px%2010px%20rgba%280%2C0%2C0%2C0.07%29%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20overflow%3A%20hidden%3B%20transition%3A%20background-color%200.5s%3B%20border-radius%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20@media%20%28max-width%3A%20450px%29%20%7B%20.app-container%20%7B%20border-radius%3A%200%3B%20max-height%3A%20100%25%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20.hidden%20%7B%20display%3A%20none%20%21important%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20%23home-screen%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20justify-content%3A%20space-between%3B%20height%3A%20100%25%3B%20padding%3A%2032px%3B%20background%3A%20%23f7f9fc%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-content%20%7B%20width%3A%20100%25%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20justify-content%3A%20center%3B%20flex-grow%3A%201%3B%20%7D%0A%20%20%20%20%20%20%20%20.logo-container%20%7B%20text-align%3A%20center%3B%20margin-bottom%3A%2040px%3B%20%7D%0A%20%20%20%20%20%20%20%20.logo%20%7B%20font-size%3A%2042px%3B%20font-weight%3A%20700%3B%20color%3A%20%231a73e8%3B%20%7D%0A%20%20%20%20%20%20%20%20.logo%20span%20%7B%20color%3A%20%23fbbc05%3B%20%7D%0A%20%20%20%20%20%20%20%20.tagline%20%7B%20color%3A%20var%28--light-text-color%29%3B%20margin-top%3A%208px%3B%20font-size%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-card%20%7B%20width%3A%20100%25%3B%20background-color%3A%20var%28--card-color%29%3B%20padding%3A%2020px%3B%20border-radius%3A%2012px%3B%20box-shadow%3A%200%204px%2012px%20rgba%280%2C0%2C0%2C0.08%29%3B%20margin-bottom%3A%2024px%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-card%20h3%20%7B%20font-size%3A%2018px%3B%20font-weight%3A%20500%3B%20margin-bottom%3A%2016px%3B%20color%3A%20%23333%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn%20%7B%20width%3A%20100%25%3B%20padding%3A%2014px%3B%20border%3A%20none%3B%20border-radius%3A%208px%3B%20font-size%3A%2016px%3B%20font-weight%3A%20500%3B%20cursor%3A%20pointer%3B%20transition%3A%20all%200.2s%20ease-in-out%3B%20text-transform%3A%20uppercase%3B%20letter-spacing%3A%200.5px%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn-primary%20%7B%20background-color%3A%20%231a73e8%3B%20color%3A%20white%3B%20margin-top%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20.input-field%2C%20.select-field%20%7B%20width%3A%20100%25%3B%20padding%3A%2014px%3B%20border%3A%201px%20solid%20var%28--divider-color%29%3B%20border-radius%3A%208px%3B%20font-size%3A%2016px%3B%20background-color%3A%20%23f7f7f7%3B%20%7D%0A%20%20%20%20%20%20%20%20.input-field%3A%3Aplaceholder%20%7B%20color%3A%20%23aaa%3B%20%7D%20.input-field%20%7B%20margin-bottom%3A%2012px%3B%20%7D%20.select-field%20%7B%20margin-bottom%3A%200%3B%20appearance%3A%20none%3B%20color%3A%20%23555%3B%20%7D%0A%20%20%20%20%20%20%20%20.select-field%3Afocus%2C%20.input-field%3Afocus%20%7B%20outline%3A%20none%3B%20border-color%3A%20%231a73e8%3B%20background-color%3A%20%23fff%3B%20box-shadow%3A%200%200%200%202px%20rgba%2826%2C%20115%2C%20232%2C%200.2%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn-secondary%20%7B%20background-color%3A%20var%28--card-color%29%3B%20color%3A%20%231a73e8%3B%20border%3A%201px%20solid%20%23ddd%3B%20%7D%0A%20%20%20%20%20%20%20%20.home-footer%20%7B%20text-align%3A%20center%3B%20color%3A%20%23aaa%3B%20font-size%3A%2012px%3B%20padding-top%3A%2020px%3B%20%7D%0A%0A%20%20%20%20%20%20%20%20%23room-screen%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20height%3A%20100%25%3B%20background-color%3A%20var%28--background-color%29%3B%20transition%3A%20background%200.5s%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-casual%20%23room-screen%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBmaWxsPSJ0cmFuc3BhcmVudCIvPjxjaXJjbGUgY3g9IjUiIGN5PSI1IiByPSIxIiBmaWxsPSIjZGVkZWRlIiBmaWxsLW9wYWNpdHk9IjAuNSIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-romantic%20%23room-screen%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+PHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSJ0cmFuc3BhcmVudCIvPjxwYXRoIGQ9Ik0gMjUgNDAgQyAyNSAzMCwgNDAgMjAsIDQwIDE1IEggMzcgQyAzNyAxNywgMjggMjUsIDI1IDMwIEMgMjIgMjUsIDEzIDE3LCAxMyAxNSBIIEExMCAxNSBDIDEwIDIwLCAyNSAzMCwgMjUgNDAgWiIgZmlsbD0iI0U5MUU2MyIgb3BhY2l0eT0iMC4xMiIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-flirt%20%23room-screen%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTkgMSBMIDE3IDcgTCAxMSA5IEwgMTcgMTEgTCAxOSAxNyBMIDIxIDExIEwgMjcgOSBMIDIxIDcgTCAxOSAxeiIgZmlsbD0iI0RBMUJGQiIgb3BhY2l0eT0iMC4yIi8+PHBhdGggZD0iTTcgMjUgTCA2IDMwIEwgMSAzMSBMIDYgMzIgTCA3IDM3IEwgOCAzMiBMIDEzIDMxIEwgOCAzMCBMIDcgMjV6IiBmaWxsPSIjREEwQkZCIiBvcGFjaXR5PSIwLjE1Ii8+PC9zdmc+%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-party%20%23room-screen%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIzIiBjeT0iMyIgcj0iMiIgZmlsbD0iI0ZGM0Q3RCIgb3BhY2l0eT0iMC41Ii8+PHJlY3QgeD0iMjUiIHk9IjUiIHdpZHRoPSIzIiBoZWlnaHQ9IjEwIiByeD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgMjUgNSkiIGZpbGw9IiM0Q0FCRTAiIG9wYWNpdHk9IjAuNSIvPjxwb2x5Z29uIHBvaW50cz0iNTAsMjAgNTUsMjUgNjAsMjAiIGZpbGw9IiNGRkVCMzIiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjQ1IiBjeT0iNTAiIHI9IjMiIGZpbGw9IiM4QkMyNTQiIG9wYWNpdHk9IjAuNSIvPjxwb2x5Z29uIHBvaW50cz0iNSw1MCAxMCw1NSA1LDU1IiBmaWxsPSIjRjQ0MzM2IiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.theme-chill%20%23room-screen%20%7B%20background-image%3A%20url%28%27data%3Aimage/svg+xml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI0MCI+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDBCOEE0IiBzdHJva2Utd2lkdGg9IjIiIG9wYWNpdHk9IjAuMSIgZD0iTSAwIDIwIEMgMjAgMTAsIDQwIDEwLCA0MCAyMCBTIDYwIDMwLCA4MCAyMCIvPjwvc3ZnPg%3D%3D%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20.room-header%20%7B%20background-color%3A%20var%28--primary-color%29%3B%20color%3A%20white%3B%20padding%3A%2012px%2016px%3B%20box-shadow%3A%200%202px%204px%20rgba%280%2C0%2C0%2C0.1%29%3B%20z-index%3A%2010%3B%20transition%3A%20background-color%200.5s%3B%20%7D%0A%20%20%20%20%20%20%20%20.room-info%20%7B%20display%3A%20flex%3B%20justify-content%3A%20space-between%3B%20align-items%3A%20center%3B%20margin-bottom%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20%23room-id-display%2C%20%23user-count%20%7B%20font-size%3A%2014px%3B%20font-weight%3A%20500%3B%20%7D%0A%20%20%20%20%20%20%20%20%23leave-room-btn%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20white%3B%20cursor%3A%20pointer%3B%20font-size%3A%2014px%3B%20font-weight%3A%20500%3B%20padding%3A%204px%208px%3B%20border-radius%3A%2012px%3B%20background-color%3A%20rgba%280%2C0%2C0%2C0.1%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%23user-count%20%7B%20background-color%3A%20rgba%28255%2C255%2C255%2C0.2%29%3B%20padding%3A%204px%208px%3B%20border-radius%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-search-input%20%7B%20flex-grow%3A%201%3B%20padding%3A%208px%2012px%3B%20border%3A%20none%3B%20border-radius%3A%208px%3B%20background-color%3A%20white%3B%20color%3A%20var%28--text-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%23now-playing-info%20%7B%20font-weight%3A%20500%3B%20text-align%3A%20center%3B%20padding%3A%2012px%2016px%204px%2016px%3B%20text-overflow%3A%20ellipsis%3B%20white-space%3A%20nowrap%3B%20overflow%3A%20hidden%3B%20%7D%0A%20%20%20%20%20%20%20%20%23music-controls%20%7B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20gap%3A%2016px%3B%20padding%3A%208px%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.control-btn%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20white%3B%20cursor%3A%20pointer%3B%20width%3A%2044px%3B%20height%3A%2044px%3B%20border-radius%3A%2050%25%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20transition%3A%20background-color%200.2s%3B%20%7D%0A%20%20%20%20%20%20%20%20%23play-pause-btn%20%7B%20width%3A%2056px%3B%20height%3A%2056px%3B%20background-color%3A%20var%28--accent-color%29%3B%20color%3A%20var%28--text-color%29%3B%20box-shadow%3A%200%202px%204px%20rgba%280%2C0%2C0%2C0.2%29%3B%20transition%3A%20background-color%200.5s%2C%20transform%200.2s%3B%20%7D%0A%20%20%20%20%20%20%20%20%23search-results%20%7B%20background%3A%20var%28--primary-dark-color%29%3B%20max-height%3A%20150px%3B%20overflow-y%3A%20auto%3B%20transition%3A%20background-color%200.5s%3B%20margin-top%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.result-item%20%7B%20padding%3A%208px%2016px%3B%20cursor%3A%20pointer%3B%20border-radius%3A%204px%3B%20%7D%20.result-item%3Ahover%20%7B%20background-color%3A%20rgba%28255%2C255%2C255%2C0.1%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%23chat-container%20%7B%20flex-grow%3A%201%3B%20padding%3A%2016px%3B%20overflow-y%3A%20auto%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20%7D%0A%20%20%20%20%20%20%20%20%23chat-messages%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20gap%3A%204px%3B%20padding-bottom%3A%208px%3B%20margin-top%3Aauto%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-wrapper%20%7B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20max-width%3A%2075%25%3B%20animation%3A%20fadeIn%200.3s%20ease-in-out%3B%20margin-top%3A%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-wrapper.mine%20%7B%20align-self%3A%20flex-end%3B%20%7D%20.message-wrapper.other%20%7B%20align-self%3A%20flex-start%3B%20%7D%0A%20%20%20%20%20%20%20%20.user-name%20%7B%20font-size%3A%2012px%3B%20font-weight%3A%20500%3B%20margin-bottom%3A%204px%3B%20padding%3A%200%2012px%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-wrapper.mine%20.user-name%20%7B%20text-align%3A%20right%3B%20color%3A%20var%28--light-text-color%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-bubble%20%7B%20padding%3A%2010px%2014px%3B%20border-radius%3A%2018px%3B%20word-wrap%3A%20break-word%3B%20box-shadow%3A%200%201px%202px%20rgba%280%2C0%2C0%2C0.08%29%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-bubble.other%20%7B%20color%3A%20%23fff%3B%20border-bottom-left-radius%3A%204px%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-bubble.mine%20%7B%20background-color%3A%20var%28--primary-color%29%3B%20color%3A%20white%3B%20border-bottom-right-radius%3A%204px%3B%20transition%3A%20background-color%200.5s%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-bubble%20img%2C%20.message-bubble%20video%20%7B%20max-width%3A%20100%25%3B%20border-radius%3A%2010px%3B%20margin-top%3A%205px%3B%20cursor%3A%20pointer%3B%20%7D%0A%20%20%20%20%20%20%20%20.message-bubble%20audio%20%7B%20width%3A%20100%25%3B%20margin-top%3A%205px%3B%20filter%3A%20invert%281%29%20sepia%281%29%20saturate%285%29%20hue-rotate%28180deg%29%3B%20%7D%20/*%20Basic%20style%20for%20audio%20player%20*/%0A%20%20%20%20%20%20%20%20@keyframes%20fadeIn%20%7B%20from%20%7B%20opacity%3A%200%3B%20transform%3A%20translateY%2810px%29%3B%20%7D%20to%20%7B%20opacity%3A%201%3B%20transform%3A%20translateY%280%29%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%23chat-input-container%20%7B%20display%3A%20flex%3B%20padding%3A%208px%2012px%3B%20border-top%3A%201px%20solid%20var%28--divider-color%29%3B%20background-color%3A%20var%28--card-color%29%3B%20align-items%3A%20center%3B%20gap%3A%208px%3B%20%7D%0A%20%20%20%20%20%20%20%20%23message-input%20%7B%20flex-grow%3A%201%3B%20border%3A%20none%3B%20background-color%3A%20var%28--background-color%29%3B%20padding%3A%2014px%3B%20border-radius%3A%2024px%3B%20transition%3A%20background-color%200.5s%3B%20font-size%3A%2016px%3B%20%7D%0A%20%20%20%20%20%20%20%20.chat-action-btn%20%7B%20background%3A%20none%3B%20border%3A%20none%3B%20color%3A%20var%28--light-text-color%29%3B%20cursor%3A%20pointer%3B%20padding%3A%208px%3B%20flex-shrink%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.chat-action-btn%20svg%20%7B%20width%3A%2024px%3B%20height%3A%2024px%3B%20fill%3A%20currentColor%3B%20%7D%0A%20%20%20%20%20%20%20%20%23mic-btn.recording%20%7B%20color%3A%20var%28--danger-color%29%3B%20animation%3A%20pulse%201.5s%20infinite%3B%20%7D%0A%20%20%20%20%20%20%20%20@keyframes%20pulse%20%7B%200%25%20%7B%20transform%3A%20scale%281%29%3B%20%7D%2050%25%20%7B%20transform%3A%20scale%281.1%29%3B%20%7D%20100%25%20%7B%20transform%3A%20scale%281%29%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%23send-btn%20%7B%20background-color%3A%20var%28--primary-color%29%3B%20border%3A%20none%3B%20color%3A%20white%3B%20width%3A%2048px%3B%20height%3A%2048px%3B%20border-radius%3A%2050%25%3B%20cursor%3A%20pointer%3B%20font-size%3A%2020px%3B%20display%3A%20flex%3B%20flex-shrink%3A%200%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20transition%3A%20background-color%200.5s%3B%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20.modal-overlay%20%7B%20position%3A%20fixed%3B%20top%3A%200%3B%20left%3A%200%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20background-color%3A%20rgba%280%2C0%2C0%2C0.5%29%3B%20display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20z-index%3A%201000%3B%20animation%3A%20fadeIn%200.2s%20ease%3B%20%7D%0A%20%20%20%20%20%20%20%20.modal-card%20%7B%20background-color%3A%20var%28--card-color%29%3B%20padding%3A%2024px%3B%20border-radius%3A%2012px%3B%20text-align%3A%20center%3B%20width%3A%2090%25%3B%20max-width%3A%20320px%3B%20box-shadow%3A%200%205px%2015px%20rgba%280%2C0%2C0%2C0.2%29%3B%20transform%3A%20scale%280.95%29%3B%20animation%3A%20scaleUp%200.2s%20ease-out%20forwards%3B%20%7D%0A%20%20%20%20%20%20%20%20@keyframes%20scaleUp%20%7B%20to%20%7B%20transform%3A%20scale%281%29%3B%20%7D%20%7D%0A%20%20%20%20%20%20%20%20.modal-card%20h3%20%7B%20font-size%3A%2020px%3B%20margin-bottom%3A%2012px%3B%20%7D%20.modal-card%20p%20%7B%20color%3A%20var%28--light-text-color%29%3B%20margin-bottom%3A%2024px%3B%20line-height%3A%201.5%3B%20%7D%0A%20%20%20%20%20%20%20%20.modal-buttons%20%7B%20display%3A%20flex%3B%20gap%3A%2012px%3B%20justify-content%3A%20center%3B%20%7D%20.modal-buttons%20.btn%20%7B%20margin-top%3A%200%3B%20%7D%0A%20%20%20%20%20%20%20%20.btn.danger%20%7B%20background-color%3A%20var%28--danger-color%29%3B%20%7D%0A%20%20%20%20%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%20%20%20%20%3Cdiv%20id%3D%22app-container%22%20class%3D%22app-container%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22home-screen%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22logo-container%22%3E%20%3Cdiv%20class%3D%22logo%22%3ESync%3Cspan%3ETune%3C/span%3E%3C/div%3E%20%3Cp%20class%3D%22tagline%22%3EListen%20%26%20Chat%20in%20Harmony%3C/p%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-card%22%3E%20%3Ch3%3EEnter%20Your%20Name%3C/h3%3E%20%3Cinput%20type%3D%22text%22%20id%3D%22user-name-input%22%20class%3D%22input-field%22%20placeholder%3D%22Your%20Name%22%20maxlength%3D%2220%22%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-card%22%3E%20%3Ch3%3ECreate%20a%20New%20Room%3C/h3%3E%20%3Cselect%20id%3D%22theme-selector%22%20class%3D%22select-field%22%3E%20%3Coption%20value%3D%22casual%22%3ECasual%20Chat%3C/option%3E%3Coption%20value%3D%22romantic%22%3ERomantic%20Chat%3C/option%3E%20%3Coption%20value%3D%22flirt%22%3EFlirt%20Chat%3C/option%3E%3Coption%20value%3D%22party%22%3EParty%20Time%3C/option%3E%20%3Coption%20value%3D%22chill%22%3EChill%20Zone%3C/option%3E%20%3C/select%3E%20%3Cbutton%20id%3D%22create-room-btn%22%20class%3D%22btn%20btn-primary%22%3ECreate%20Room%3C/button%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22home-card%22%3E%20%3Ch3%3EJoin%20an%20Existing%20Room%3C/h3%3E%20%3Cinput%20type%3D%22text%22%20id%3D%22join-room-input%22%20class%3D%22input-field%22%20placeholder%3D%22Enter%204-Digit%20Room%20ID%22%20maxlength%3D%224%22%3E%20%3Cbutton%20id%3D%22join-room-btn%22%20class%3D%22btn%20btn-secondary%22%3EJoin%20Room%3C/button%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cfooter%20class%3D%22home-footer%22%3E%20%A9%202025%20-%20Created%20by%20Abhishek%20%3C/footer%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22room-screen%22%20class%3D%22hidden%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22room-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22room-info%22%3E%20%3Cbutton%20id%3D%22leave-room-btn%22%3E%u2190%20Leave%3C/button%3E%20%3Cspan%20id%3D%22room-id-display%22%3E%3C/span%3E%20%3Cspan%20id%3D%22user-count%22%3E%3C/span%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22music-search-container%22%3E%20%3Cinput%20type%3D%22text%22%20id%3D%22music-search-input%22%20placeholder%3D%22Search%20or%20click%20for%20suggestions...%22%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22now-playing-container%22%3E%20%3Cdiv%20id%3D%22now-playing-info%22%20class%3D%22hidden%22%3E%3C/div%3E%20%3Cdiv%20id%3D%22music-controls%22%20class%3D%22hidden%22%3E%20%3Cbutton%20id%3D%22backward-btn%22%20class%3D%22control-btn%22%20title%3D%22Rewind%2010s%22%3E%3C/button%3E%20%3Cbutton%20id%3D%22play-pause-btn%22%20class%3D%22control-btn%22%20title%3D%22Play/Pause%22%3E%3C/button%3E%20%3Cbutton%20id%3D%22forward-btn%22%20class%3D%22control-btn%22%20title%3D%22Forward%2010s%22%3E%3C/button%3E%20%3C/div%3E%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22search-results%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22chat-container%22%3E%3Cdiv%20id%3D%22chat-messages%22%3E%3C/div%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20id%3D%22chat-input-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22add-file-btn%22%20class%3D%22chat-action-btn%22%20title%3D%22Send%20Photo/Video%22%3E%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M16.5%206v11.5c0%202.21-1.79%204-4%204s-4-1.79-4-4V5c0-1.38%201.12-2.5%202.5-2.5s2.5%201.12%202.5%202.5v10.5c0%20.55-.45%201-1%201s-1-.45-1-1V6H10v9.5c0%201.38%201.12%202.5%202.5%202.5s2.5-1.12%202.5-2.5V5c0-2.21-1.79-4-4-4S7%202.79%207%205v11.5c0%203.04%202.46%205.5%205.5%205.5s5.5-2.46%205.5-5.5V6h-1.5z%22%3E%3C/path%3E%3C/svg%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22text%22%20id%3D%22message-input%22%20placeholder%3D%22Type%20a%20message...%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22cancel-record-btn%22%20class%3D%22chat-action-btn%20hidden%22%20title%3D%22Cancel%20Recording%22%3E%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M19%206.41L17.59%205%2012%2010.59%206.41%205%205%206.41%2010.59%2012%205%2017.59%206.41%2019%2012%2013.41%2017.59%2019%2019%2017.59%2013.41%2012z%22%3E%3C/path%3E%3C/svg%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22mic-btn%22%20class%3D%22chat-action-btn%22%20title%3D%22Record%20Voice%22%3E%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%2014c1.66%200%202.99-1.34%202.99-3L15%205c0-1.66-1.34-3-3-3S9%203.34%209%205v6c0%201.66%201.34%203%203%203zm5.3-3c0%203-2.54%205.1-5.3%205.1S6.7%2014%206.7%2011H5c0%203.41%202.72%206.23%206%206.72V21h2v-3.28c3.28-.48%206-3.3%206-6.72h-1.7z%22%3E%3C/path%3E%3C/svg%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22send-btn%22%3E%u27A4%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22file%22%20id%3D%22file-input%22%20class%3D%22hidden%22%20accept%3D%22image/*%2Cvideo/*%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22custom-modal%22%20class%3D%22modal-overlay%20hidden%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22modal-card%22%3E%20%3Ch3%20id%3D%22modal-title%22%3E%3C/h3%3E%20%3Cp%20id%3D%22modal-message%22%3E%3C/p%3E%20%3Cdiv%20id%3D%22modal-buttons%22%20class%3D%22modal-buttons%22%3E%3C/div%3E%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22share-modal%22%20class%3D%22modal-overlay%20hidden%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22modal-card%22%3E%3Ch3%3ERoom%20Created%21%3C/h3%3E%3Cp%3EShare%20this%20link%20with%20your%20friends%20to%20join%3A%3C/p%3E%20%3Cdiv%20id%3D%22share-link%22%20style%3D%22padding%3A%2010px%3B%20background%3A%20%23f0f2f5%3B%20border-radius%3A%208px%3B%20margin-bottom%3A%2016px%3B%20word-break%3A%20break-all%3B%22%3E%3C/div%3E%3Cdiv%20class%3D%22modal-buttons%22%3E%3Cbutton%20id%3D%22copy-link-btn%22%20class%3D%22btn%20btn-primary%22%3ECopy%20Link%3C/button%3E%20%3Cbutton%20id%3D%22close-share-modal%22%20class%3D%22btn%20btn-secondary%22%3EClose%3C/button%3E%3C/div%3E%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20id%3D%22player%22%20style%3D%22position%3A%20absolute%3B%20top%3A%20-9999px%3B%20left%3A%20-9999px%3B%22%3E%3C/div%3E%0A%0A%20%20%20%20%3Cscript%20type%3D%22module%22%3E%0A%20%20%20%20%20%20import%20%7B%20initializeApp%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/11.9.1/firebase-app.js%22%3B%0A%20%20%20%20%20%20import%20%7B%20getDatabase%2C%20ref%2C%20set%2C%20onValue%2C%20push%2C%20onDisconnect%2C%20remove%2C%20update%2C%20get%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/11.9.1/firebase-database.js%22%3B%0A%20%20%20%20%20%20import%20%7B%20getStorage%2C%20ref%20as%20storageRef%2C%20uploadBytes%2C%20getDownloadURL%20%7D%20from%20%22https%3A//www.gstatic.com/firebasejs/11.9.1/firebase-storage.js%22%3B%0A%0A%20%20%20%20%20%20const%20firebaseConfig%20%3D%20%7B%20apiKey%3A%20%22AIzaSyAQderkN3YvzzWwotCvz6uIxZ2BgG7ox7E%22%2C%20authDomain%3A%20%22shop-ae16c.firebaseapp.com%22%2C%20databaseURL%3A%20%22https%3A//shop-ae16c-default-rtdb.asia-southeast1.firebasedatabase.app%22%2C%20projectId%3A%20%22shop-ae16c%22%2C%20storageBucket%3A%20%22shop-ae16c.appspot.com%22%2C%20messagingSenderId%3A%20%22166788880540%22%2C%20appId%3A%20%221%3A166788880540%3Aweb%3Ac0e53efb96f111fe167559%22%20%7D%3B%0A%20%20%20%20%20%20const%20app%20%3D%20initializeApp%28firebaseConfig%29%3B%20const%20db%20%3D%20getDatabase%28app%29%3B%20const%20storage%20%3D%20getStorage%28app%29%3B%0A%20%20%20%20%20%20const%20YOUTUBE_API_KEY%20%3D%20%27AIzaSyBfXvqgbFoh0GgYTm9YiTBQaAImCc2J2yc%27%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20let%20currentRoomId%2C%20localPlayer%2C%20currentUserName%2C%20currentRoomTheme%2C%20creatorId%2C%20mediaRecorder%2C%20audioChunks%20%3D%20%5B%5D%2C%20isRecording%20%3D%20false%2C%0A%20%20%20%20%20%20%20%20%20%20currentUserId%20%3D%20%27user-%27%20+%20Math.random%28%29.toString%2836%29.substr%282%2C%209%29%2C%0A%20%20%20%20%20%20%20%20%20%20lastPlayerState%20%3D%20-1%2C%20lastSeekTs%20%3D%200%2C%20suggestionsShown%20%3D%20false%2C%20chatListener%20%3D%20null%2C%20recordingStream%20%3D%20null%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20sendSound%20%3D%20new%20Audio%28%22https%3A//assets.mixkit.co/sfx/preview/mixkit-message-pop-alert-2354.mp3%22%29%3B%0A%20%20%20%20%20%20const%20receiveSound%20%3D%20new%20Audio%28%22https%3A//assets.mixkit.co/sfx/preview/mixkit-positive-notification-951.mp3%22%29%3B%0A%20%20%20%20%20%20%5BsendSound.volume%2C%20receiveSound.volume%5D%20%3D%20%5B0.5%2C%200.5%5D%3B%0A%0A%20%20%20%20%20%20const%20el%20%3D%20%7B%0A%20%20%20%20%20%20%20%20app%3A%20document.getElementById%28%27app-container%27%29%2C%20home%3A%20document.getElementById%28%27home-screen%27%29%2C%20room%3A%20document.getElementById%28%27room-screen%27%29%2C%0A%20%20%20%20%20%20%20%20createBtn%3A%20document.getElementById%28%27create-room-btn%27%29%2C%20joinInput%3A%20document.getElementById%28%27join-room-input%27%29%2C%20joinBtn%3A%20document.getElementById%28%27join-room-btn%27%29%2C%0A%20%20%20%20%20%20%20%20themeSel%3A%20document.getElementById%28%27theme-selector%27%29%2C%20nameInput%3A%20document.getElementById%28%27user-name-input%27%29%2C%20idDisplay%3A%20document.getElementById%28%27room-id-display%27%29%2C%0A%20%20%20%20%20%20%20%20userCount%3A%20document.getElementById%28%27user-count%27%29%2C%20msgInput%3A%20document.getElementById%28%27message-input%27%29%2C%20sendBtn%3A%20document.getElementById%28%27send-btn%27%29%2C%0A%20%20%20%20%20%20%20%20chatBox%3A%20document.getElementById%28%27chat-messages%27%29%2C%20musicInput%3A%20document.getElementById%28%27music-search-input%27%29%2C%20resultsBox%3A%20document.getElementById%28%27search-results%27%29%2C%0A%20%20%20%20%20%20%20%20nowPlaying%3A%20document.getElementById%28%27now-playing-info%27%29%2C%20leaveBtn%3A%20document.getElementById%28%27leave-room-btn%27%29%2C%20musicControls%3A%20document.getElementById%28%27music-controls%27%29%2C%0A%20%20%20%20%20%20%20%20playPauseBtn%3A%20document.getElementById%28%27play-pause-btn%27%29%2C%20fwdBtn%3A%20document.getElementById%28%27forward-btn%27%29%2C%20bwdBtn%3A%20document.getElementById%28%27backward-btn%27%29%2C%0A%20%20%20%20%20%20%20%20customModal%3A%20document.getElementById%28%27custom-modal%27%29%2C%20modalTitle%3A%20document.getElementById%28%27modal-title%27%29%2C%20modalMsg%3A%20document.getElementById%28%27modal-message%27%29%2C%20modalBtns%3A%20document.getElementById%28%27modal-buttons%27%29%2C%0A%20%20%20%20%20%20%20%20shareModal%3A%20document.getElementById%28%27share-modal%27%29%2C%20shareLink%3A%20document.getElementById%28%27share-link%27%29%2C%20copyLinkBtn%3A%20document.getElementById%28%27copy-link-btn%27%29%2C%20closeShareBtn%3A%20document.getElementById%28%27close-share-modal%27%29%2C%0A%20%20%20%20%20%20%20%20addFileBtn%3A%20document.getElementById%28%27add-file-btn%27%29%2C%20micBtn%3A%20document.getElementById%28%27mic-btn%27%29%2C%20fileInput%3A%20document.getElementById%28%27file-input%27%29%2C%0A%20%20%20%20%20%20%20%20chatInputContainer%3A%20document.getElementById%28%27chat-input-container%27%29%2C%20cancelRecordBtn%3A%20document.getElementById%28%27cancel-record-btn%27%29%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20icons%20%3D%20%7B%20play%3A%20%60%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M8%205v14l11-7z%22/%3E%3C/svg%3E%60%2C%20pause%3A%20%60%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M6%2019h4V5H6v14zm8-14v14h4V5h-4z%22/%3E%3C/svg%3E%60%2C%20forward%3A%20%60%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M13%206v12l8.5-6L13%206zM4%2018l8.5-6L4%206v12z%22/%3E%3C/svg%3E%60%2C%20backward%3A%20%60%3Csvg%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M11%2018V6l-8.5%206L11%2018zm.5-6L20%2018V6l-8.5%206z%22/%3E%3C/svg%3E%60%2C%20send%3A%20%60%u27A4%60%2C%20check%3A%20%60%u2713%60%20%7D%3B%0A%20%20%20%20%20%20el.bwdBtn.innerHTML%20%3D%20icons.backward%3B%20el.fwdBtn.innerHTML%20%3D%20icons.forward%3B%0A%0A%20%20%20%20%20%20const%20hideModal%20%3D%20%28%29%20%3D%3E%20el.customModal.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%20%20function%20showModal%28title%2C%20message%2C%20buttons%20%3D%20%5B%7B%20text%3A%20%27OK%27%2C%20class%3A%20%27primary%27%2C%20action%3A%20hideModal%20%7D%5D%29%20%7B%20el.modalTitle.textContent%20%3D%20title%3B%20el.modalMsg.textContent%20%3D%20message%3B%20el.modalBtns.innerHTML%20%3D%20%27%27%3B%20buttons.forEach%28b%20%3D%3E%20%7B%20const%20btn%20%3D%20document.createElement%28%27button%27%29%3B%20btn.className%20%3D%20%60btn%20btn-%24%7Bb.class%7D%60%3B%20btn.textContent%20%3D%20b.text%3B%20btn.onclick%20%3D%20b.action%3B%20el.modalBtns.appendChild%28btn%29%3B%20%7D%29%3B%20el.customModal.classList.remove%28%27hidden%27%29%3B%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20function%20setInputUIState%28state%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20el.msgInput.disabled%20%3D%20false%3B%20el.msgInput.value%20%3D%20%27%27%3B%20el.sendBtn.innerHTML%20%3D%20icons.send%3B%0A%20%20%20%20%20%20%20%20%20%20el.addFileBtn.classList.remove%28%27hidden%27%29%3B%20el.micBtn.classList.remove%28%27hidden%27%29%3B%20el.cancelRecordBtn.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20el.micBtn.classList.remove%28%27recording%27%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20%28state%20%3D%3D%3D%20%27recording%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.msgInput.placeholder%20%3D%20%27Recording...%27%3B%20el.msgInput.disabled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.sendBtn.innerHTML%20%3D%20icons.check%3B%20el.addFileBtn.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.micBtn.classList.add%28%27recording%27%29%3B%20el.cancelRecordBtn.classList.remove%28%27hidden%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20%27uploading%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.msgInput.placeholder%20%3D%20%27Uploading...%27%3B%20el.msgInput.disabled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20//%20%27text%27%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.msgInput.placeholder%20%3D%20%27Type%20a%20message...%27%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20async%20function%20createRoom%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28%21validateName%28%29%29%20return%3B%20let%20newRoomId%2C%20roomExists%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20while%20%28roomExists%29%20%7B%20newRoomId%20%3D%20Math.floor%281000%20+%20Math.random%28%29%20*%209000%29.toString%28%29%3B%20const%20snapshot%20%3D%20await%20get%28ref%28db%2C%20%27rooms/%27%20+%20newRoomId%29%29%3B%20roomExists%20%3D%20snapshot.exists%28%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20set%28ref%28db%2C%20%27rooms/%27%20+%20newRoomId%29%2C%20%7B%20createdAt%3A%20new%20Date%28%29.toISOString%28%29%2C%20theme%3A%20el.themeSel.value%2C%20creatorId%3A%20currentUserId%2C%20nowPlaying%3A%20%7B%20videoId%3A%20%27%27%2C%20title%3A%20%27Nothing%20is%20playing%27%2C%20state%3A%20-1%2C%20seekTo%3A%20null%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%29.then%28%28%29%20%3D%3E%20%7B%20showShareModal%28newRoomId%29%3B%20joinRoom%28newRoomId%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20validateName%28%29%20%7B%20currentUserName%20%3D%20el.nameInput.value.trim%28%29%3B%20if%20%28%21currentUserName%29%20%7B%20showModal%28%27Name%20Required%27%2C%20%27Please%20enter%20your%20name.%27%29%3B%20return%20false%3B%20%7D%20return%20true%3B%20%7D%0A%20%20%20%20%20%20el.createBtn.onclick%20%3D%20createRoom%3B%0A%20%20%20%20%20%20el.joinBtn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%20if%20%28%21validateName%28%29%29%20return%3B%20const%20roomId%20%3D%20el.joinInput.value.trim%28%29%3B%20if%20%28roomId.length%20%3D%3D%3D%204%20%26%26%20%21isNaN%28roomId%29%29%20onValue%28ref%28db%2C%20%27rooms/%27%20+%20roomId%29%2C%20%28s%29%20%3D%3E%20s.exists%28%29%20%3F%20joinRoom%28roomId%29%20%3A%20showModal%28%27Error%27%2C%20%27Room%20not%20found%21%27%2C%20%5B%7B%20text%3A%20%27OK%27%2C%20class%3A%20%27primary%27%2C%20action%3A%20hideModal%20%7D%5D%29%2C%20%7B%20onlyOnce%3A%20true%20%7D%29%3B%20else%20showModal%28%27Invalid%20ID%27%2C%20%27Room%20ID%20must%20be%20a%204-digit%20number.%27%29%3B%20%7D%3B%0A%20%20%20%20%20%20el.leaveBtn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%20const%20count%20%3D%20parseInt%28el.userCount.textContent.replace%28%27%uD83D%uDC64%27%2C%20%27%27%29.trim%28%29%2C%2010%29%3B%20const%20isCreator%20%3D%20currentUserId%20%3D%3D%3D%20creatorId%3B%20const%20leaveAction%20%3D%20%28%29%20%3D%3E%20%7B%20remove%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/members/%24%7BcurrentUserId%7D%60%29%29%3B%20window.location.replace%28window.location.pathname%29%3B%20%7D%3B%20if%20%28count%20%3D%3D%3D%201%20%26%26%20isCreator%29%20%7B%20showModal%28%27Delete%20Room%3F%27%2C%20%27You%20are%20the%20last%20user.%20Leaving%20will%20delete%20this%20room%20and%20all%20its%20messages%20permanently.%27%2C%20%5B%7B%20text%3A%20%27Cancel%27%2C%20class%3A%20%27secondary%27%2C%20action%3A%20hideModal%20%7D%2C%20%7B%20text%3A%20%27Delete%20Room%27%2C%20class%3A%20%27danger%27%2C%20action%3A%20%28%29%20%3D%3E%20%7B%20hideModal%28%29%3B%20remove%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D%60%29%29.then%28leaveAction%29%3B%20%7D%7D%5D%29%3B%20%7D%20else%20%7B%20leaveAction%28%29%3B%20%7D%20%7D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20function%20joinRoom%28roomId%29%20%7B%20currentRoomId%20%3D%20roomId%3B%20el.home.classList.add%28%27hidden%27%29%3B%20el.room.classList.remove%28%27hidden%27%29%3B%20el.idDisplay.textContent%20%3D%20%60ID%3A%20%24%7BcurrentRoomId%7D%60%3B%20const%20userRef%20%3D%20ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/members/%24%7BcurrentUserId%7D%60%29%3B%20set%28userRef%2C%20%7B%20name%3A%20currentUserName%20%7D%29%3B%20onDisconnect%28userRef%29.remove%28%29%3B%20startListeners%28%29%3B%20%7D%0A%20%20%20%20%20%20function%20showShareModal%28roomId%29%20%7B%20const%20link%20%3D%20%60%24%7Bwindow.location.origin%7D%24%7Bwindow.location.pathname%7D%3Froom%3D%24%7BroomId%7D%60%3B%20el.shareLink.textContent%20%3D%20link%3B%20el.shareModal.classList.remove%28%27hidden%27%29%3B%20%7D%0A%20%20%20%20%20%20el.copyLinkBtn.onclick%20%3D%20%28%29%20%3D%3E%20%7B%20navigator.clipboard.writeText%28el.shareLink.textContent%29.then%28%28%29%20%3D%3E%20%7B%20el.shareModal.classList.add%28%27hidden%27%29%3B%20showModal%28%27Success%21%27%2C%20%27Room%20link%20copied%20to%20clipboard.%27%2C%20%5B%7B%20text%3A%20%27Awesome%21%27%2C%20class%3A%20%27primary%27%2C%20action%3A%20hideModal%20%7D%5D%29%3B%20%7D%29%3B%20%7D%3B%0A%20%20%20%20%20%20el.closeShareBtn.onclick%20%3D%20%28%29%20%3D%3E%20el.shareModal.classList.add%28%27hidden%27%29%3B%0A%20%20%20%20%20%20window.onload%20%3D%20%28%29%20%3D%3E%20%7B%20const%20r%20%3D%20new%20URLSearchParams%28window.location.search%29.get%28%27room%27%29%3B%20if%20%28r%29%20%7B%20el.joinInput.value%20%3D%20r%3B%20%7D%20%7D%3B%0A%0A%20%20%20%20%20%20function%20startListeners%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20onValue%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D%60%29%2C%20%28s%29%20%3D%3E%20%7B%20const%20d%20%3D%20s.val%28%29%3B%20if%20%28%21d%29%20%7B%20if%20%28el.room.classList.contains%28%27hidden%27%29%29%20return%3B%20showModal%28%27Room%20Closed%27%2C%20%27This%20room%20no%20longer%20exists.%27%2C%20%5B%7Btext%3A%20%27OK%27%2C%20action%3A%20%28%29%20%3D%3E%20window.location.replace%28window.location.pathname%29%7D%5D%29%3B%20return%3B%20%7D%20creatorId%20%3D%20d.creatorId%3B%20currentRoomTheme%20%3D%20d.theme%7C%7C%27casual%27%3B%20el.app.className%20%3D%20%60app-container%20theme-%24%7BcurrentRoomTheme%7D%60%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20onValue%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/members%60%29%2C%20%28s%29%20%3D%3E%20%7B%20const%20count%20%3D%20s.exists%28%29%20%3F%20Object.keys%28s.val%28%29%29.length%20%3A%200%3B%20el.userCount.textContent%20%3D%20%60%uD83D%uDC64%20%24%7Bcount%7D%60%3B%20if%20%28count%20%3D%3D%3D%200%20%26%26%20currentUserId%20%3D%3D%3D%20creatorId%29%20%7B%20remove%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D%60%29%29%3B%20%7D%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20if%28chatListener%29%20chatListener%28%29%3B%20el.chatBox.innerHTML%20%3D%20%27%27%3B%0A%20%20%20%20%20%20%20%20%20%20chatListener%20%3D%20onValue%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/chat%60%29%2C%20%28snapshot%29%20%3D%3E%20%7B%20el.chatBox.innerHTML%20%3D%20%27%27%3B%20snapshot.forEach%28child%20%3D%3E%20%7B%20displayMessage%28child.val%28%29%29%3B%20%7D%29%3B%20el.chatBox.scrollTop%20%3D%20el.chatBox.scrollHeight%3B%20%7D%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20sendMessage%20%3D%20%28%29%20%3D%3E%20%7B%20if%20%28isRecording%29%20%7B%20stopRecordingAndSend%28%29%3B%20return%3B%20%7D%20const%20text%20%3D%20el.msgInput.value.trim%28%29%3B%20if%20%28text%20%26%26%20currentRoomId%29%20%7B%20push%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/chat%60%29%2C%20%7B%20type%3A%20%27text%27%2C%20text%3A%20text%2C%20senderId%3A%20currentUserId%2C%20userName%3A%20currentUserName%20%7D%29%3B%20sendSound.play%28%29.catch%28e%20%3D%3E%20%7B%7D%29%3B%20el.msgInput.value%20%3D%20%27%27%3B%20%7D%20%7D%3B%0A%20%20%20%20%20%20el.sendBtn.onclick%20%3D%20sendMessage%3B%20el.msgInput.onkeyup%20%3D%20%28e%29%20%3D%3E%20%7B%20if%20%28e.key%20%3D%3D%3D%20%27Enter%27%29%20sendMessage%28%29%3B%20%7D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20function%20displayMessage%28msg%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20wrapper%20%3D%20document.createElement%28%27div%27%29%3B%20wrapper.className%20%3D%20%27message-wrapper%27%3B%0A%20%20%20%20%20%20%20%20%20%20const%20nameSpan%20%3D%20document.createElement%28%27span%27%29%3B%20nameSpan.className%20%3D%20%27user-name%27%3B%0A%20%20%20%20%20%20%20%20%20%20const%20bubble%20%3D%20document.createElement%28%27div%27%29%3B%20bubble.className%20%3D%20%27message-bubble%27%3B%0A%20%20%20%20%20%20%20%20%20%20if%20%28msg.senderId%20%3D%3D%3D%20currentUserId%29%20%7B%20wrapper.classList.add%28%27mine%27%29%3B%20bubble.classList.add%28%27mine%27%29%3B%20nameSpan.textContent%20%3D%20%22You%22%3B%20%7D%20%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%20wrapper.classList.add%28%27other%27%29%3B%20bubble.classList.add%28%27other%27%29%3B%20nameSpan.textContent%20%3D%20msg.userName%20%7C%7C%20%27Anonymous%27%3B%20let%20color%20%3D%20getUserColor%28msg.senderId%29%3B%20bubble.style.backgroundColor%20%3D%20color%3B%20nameSpan.style.color%20%3D%20color%3B%20if%20%28document.hasFocus%28%29%29%20receiveSound.play%28%29.catch%28e%20%3D%3E%20%7B%7D%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20if%28msg.type%20%3D%3D%3D%20%27text%27%29%20%7B%20bubble.textContent%20%3D%20msg.text%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20mediaElement%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28msg.type%20%3D%3D%3D%20%27image%27%29%20%7B%20mediaElement%20%3D%20document.createElement%28%27img%27%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28msg.type%20%3D%3D%3D%20%27video%27%29%20%7B%20mediaElement%20%3D%20document.createElement%28%27video%27%29%3B%20mediaElement.controls%20%3D%20true%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20%28msg.type%20%3D%3D%3D%20%27audio%27%29%20%7B%20mediaElement%20%3D%20document.createElement%28%27audio%27%29%3B%20mediaElement.controls%20%3D%20true%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28mediaElement%29%20%7B%20mediaElement.src%20%3D%20msg.url%3B%20bubble.appendChild%28mediaElement%29%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20wrapper.appendChild%28nameSpan%29%3B%20wrapper.appendChild%28bubble%29%3B%20el.chatBox.append%28wrapper%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20el.addFileBtn.onclick%20%3D%20%28%29%20%3D%3E%20el.fileInput.click%28%29%3B%0A%20%20%20%20%20%20el.fileInput.onchange%20%3D%20%28e%29%20%3D%3E%20%7B%20const%20file%20%3D%20e.target.files%5B0%5D%3B%20if%20%28file%29%20uploadFile%28file%29%3B%20%7D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20async%20function%20uploadFile%28file%2C%20typeOverride%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28file.size%20%3E%2015%20*%201024%20*%201024%29%20%7B%20showModal%28%27File%20Too%20Large%27%2C%20%27Please%20select%20a%20file%20smaller%20than%2015%20MB.%27%29%3B%20return%3B%20%7D%0A%20%20%20%20%20%20%20%20%20%20setInputUIState%28%27uploading%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20const%20filePath%20%3D%20%60rooms/%24%7BcurrentRoomId%7D/%24%7BDate.now%28%29%7D-%24%7Bfile.name%20%7C%7C%20%27voice.webm%27%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20const%20fileRef%20%3D%20storageRef%28storage%2C%20filePath%29%3B%0A%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20await%20uploadBytes%28fileRef%2C%20file%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20url%20%3D%20await%20getDownloadURL%28fileRef%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20type%20%3D%20typeOverride%20%7C%7C%20%28file.type.startsWith%28%27image%27%29%20%3F%20%27image%27%20%3A%20%27video%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20push%28ref%28db%2C%20%60rooms/%24%7BcurrentRoomId%7D/chat%60%29%2C%20%7B%20type%2C%20url%2C%20senderId%3A%20currentUserId%2C%20userName%3A%20currentUserName%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28error%29%20%7B%20showModal%28%27Upload%20Failed%27%2C%20%27Could%20not%20upload%20the%20file.%20Please%20try%20again.%27%29%3B%20console.error%28error%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20finally%20%7B%20setInputUIState%28%27text%27%29%3B%20el.fileInput.value%20%3D%20%27%27%3B%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20async%20function%20handleMicClick%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20%28isRecording%29%20return%3B%20//%20Should%20not%20happen%20with%20new%20UI%0A%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20recordingStream%20%3D%20await%20navigator.mediaDevices.getUserMedia%28%7B%20audio%3A%20true%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mediaRecorder%20%3D%20new%20MediaRecorder%28recordingStream%29%3B%20audioChunks%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mediaRecorder.ondataavailable%20%3D%20e%20%3D%3E%20audioChunks.push%28e.data%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mediaRecorder.onstop%20%3D%20%28%29%20%3D%3E%20%7B%20const%20audioBlob%20%3D%20new%20Blob%28audioChunks%2C%20%7B%20type%3A%20%27audio/webm%27%20%7D%29%3B%20uploadFile%28audioBlob%2C%20%27audio%27%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mediaRecorder.start%28%29%3B%20isRecording%20%3D%20true%3B%20setInputUIState%28%27recording%27%29%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%28err%29%20%7B%20showModal%28%27Permission%20Denied%27%2C%20%27Microphone%20access%20is%20required%20to%20send%20voice%20messages.%27%29%3B%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20stopRecordingAndSend%28%29%20%7B%20if%20%28mediaRecorder%20%26%26%20mediaRecorder.state%20%3D%3D%3D%20%27recording%27%29%20%7B%20mediaRecorder.stop%28%29%3B%20%7D%20isRecording%20%3D%20false%3B%20%7D%0A%20%20%20%20%20%20function%20cancelRecording%28%29%20%7B%20if%20%28mediaRecorder%20%26%26%20mediaRecorder.state%20%3D%3D%3D%20%27recording%27%29%20%7B%20mediaRecorder.onstop%20%3D%20null%3B%20mediaRecorder.stop%28%29%3B%20%7D%20if%20%28recordingStream%29%20%7B%20recordingStream.getTracks%28%29.forEach%28track%20%3D%3E%20track.stop%28%29%29%3B%20%7D%20isRecording%20%3D%20false%3B%20setInputUIState%28%27text%27%29%3B%20%7D%0A%20%20%20%20%20%20el.micBtn.onclick%20%3D%20handleMicClick%3B%0A%20%20%20%20%20%20el.cancelRecordBtn.onclick%20%3D%20cancelRecording%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%3C/script%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//www.youtube.com/iframe_api%22%3E%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E"));
//-->
</script>
